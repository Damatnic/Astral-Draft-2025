# Astral Draft v4 - Production Environment Configuration
# =======================================================

# ==========================================
# CORE ENVIRONMENT
# ==========================================
NODE_ENV=production
PORT=3000
HOSTNAME=0.0.0.0

# ==========================================
# DATABASE - PRODUCTION SETUP
# ==========================================
# Replace with your production database URL
DATABASE_URL="postgresql://user:password@production-db-host:5432/astral_draft_prod?schema=public&sslmode=require"
DATABASE_POOL_SIZE=50
DATABASE_POOL_TIMEOUT=60000
DATABASE_IDLE_TIMEOUT=10000
DATABASE_CONNECTION_LIMIT=100

# Database backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=astral-draft-backups
BACKUP_AWS_REGION=us-east-1

# ==========================================
# REDIS CONFIGURATION
# ==========================================
# Production Redis instance
REDIS_HOST=production-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your-secure-redis-password
REDIS_DB=0
REDIS_TLS=true
REDIS_CONNECTION_POOL_SIZE=10
REDIS_RETRY_ATTEMPTS=3
REDIS_RETRY_DELAY=1000

# Redis clusters (if using)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=redis-cluster-1:6379,redis-cluster-2:6379,redis-cluster-3:6379

# ==========================================
# AUTHENTICATION
# ==========================================
# 64-character random string for production
NEXTAUTH_SECRET=your-64-character-nextauth-secret-generated-with-openssl-rand-base64-64
NEXTAUTH_URL=https://yourdomain.com

# JWT Configuration
JWT_ACCESS_TOKEN_EXPIRE=15m
JWT_REFRESH_TOKEN_EXPIRE=7d
JWT_SIGNING_ALGORITHM=HS256

# ==========================================
# OAUTH PROVIDERS
# ==========================================
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth
GITHUB_ID=your-github-oauth-app-id
GITHUB_SECRET=your-github-oauth-app-secret

# Discord OAuth (optional)
DISCORD_CLIENT_ID=your-discord-client-id
DISCORD_CLIENT_SECRET=your-discord-client-secret

# ==========================================
# EXTERNAL APIS
# ==========================================
# Sports Data API
SPORTS_DATA_API_KEY=your-production-sports-api-key
SPORTS_DATA_API_BASE_URL=https://api.sportsdata.io/v3/nfl
SPORTS_DATA_RATE_LIMIT=1000
SPORTS_DATA_TIMEOUT=30000

# AI/ML Services
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4096

GEMINI_API_KEY=your-gemini-api-key
GEMINI_MODEL=gemini-pro

# ==========================================
# EMAIL CONFIGURATION
# ==========================================
# Resend (Primary)
RESEND_API_KEY=your-resend-api-key
RESEND_FROM_EMAIL=noreply@yourdomain.com
RESEND_REPLY_TO=support@yourdomain.com

# SMTP Backup
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@yourdomain.com

# Email Queue Configuration
EMAIL_QUEUE_ENABLED=true
EMAIL_BATCH_SIZE=100
EMAIL_RETRY_ATTEMPTS=3
EMAIL_RATE_LIMIT=1000

# ==========================================
# WEBSOCKET CONFIGURATION
# ==========================================
WS_PORT=3001
WS_HOST=0.0.0.0
WS_CORS_ORIGIN=https://yourdomain.com
WS_MAX_CONNECTIONS=10000
WS_HEARTBEAT_INTERVAL=30000
WS_CONNECTION_TIMEOUT=60000

# WebSocket Scaling
WS_CLUSTER_ENABLED=true
WS_REDIS_ADAPTER=true

# ==========================================
# RATE LIMITING
# ==========================================
# Upstash Redis for rate limiting
UPSTASH_REDIS_REST_URL=https://your-upstash-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# Rate limit configurations
RATE_LIMIT_WINDOW=900000  # 15 minutes in ms
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_BLOCK_DURATION=3600000  # 1 hour in ms

# ==========================================
# CDN AND STATIC ASSETS
# ==========================================
CDN_URL=https://cdn.yourdomain.com
CDN_IMAGES_URL=https://images.yourdomain.com
CDN_STATIC_URL=https://static.yourdomain.com

# AWS S3 Configuration
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
AWS_S3_BUCKET=astral-draft-assets
AWS_CLOUDFRONT_DISTRIBUTION_ID=your-cloudfront-distribution-id

# ==========================================
# MONITORING AND OBSERVABILITY
# ==========================================
# Sentry
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=v4.0.0
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0.1

# Analytics
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
MIXPANEL_TOKEN=your-mixpanel-token

# Application Performance Monitoring
DATADOG_API_KEY=your-datadog-api-key
DATADOG_APP_KEY=your-datadog-app-key
NEW_RELIC_LICENSE_KEY=your-newrelic-license-key

# ==========================================
# LOGGING
# ==========================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/astral-draft/app.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=50mb

# Structured logging
ENABLE_REQUEST_LOGGING=true
ENABLE_DATABASE_LOGGING=false
ENABLE_PERFORMANCE_LOGGING=true

# ==========================================
# SECURITY
# ==========================================
# Encryption
ENCRYPTION_KEY=your-32-character-encryption-key
ENCRYPTION_ALGORITHM=aes-256-gcm

# CORS
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com
CORS_CREDENTIALS=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_REPORT_URI=https://yourdomain.com/api/csp-report

# ==========================================
# FEATURE FLAGS
# ==========================================
FEATURE_ORACLE_ENABLED=true
FEATURE_REAL_TIME_DRAFT=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_MOBILE_APP=true
FEATURE_BETA_TESTING=true
FEATURE_PREMIUM_FEATURES=true

# ==========================================
# PERFORMANCE
# ==========================================
# Caching
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_MEMORY=512mb

# Database connection pooling
DB_CONNECTION_POOL_MIN=5
DB_CONNECTION_POOL_MAX=50
DB_CONNECTION_POOL_IDLE=10000

# API Response compression
COMPRESSION_ENABLED=true
COMPRESSION_THRESHOLD=1024
COMPRESSION_LEVEL=6

# ==========================================
# NOTIFICATIONS
# ==========================================
# Push notifications
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:admin@yourdomain.com

# Notification queues
NOTIFICATION_QUEUE_ENABLED=true
NOTIFICATION_BATCH_SIZE=50
NOTIFICATION_RETRY_ATTEMPTS=3

# ==========================================
# PAYMENTS (if applicable)
# ==========================================
STRIPE_PUBLIC_KEY=pk_live_your-stripe-public-key
STRIPE_SECRET_KEY=sk_live_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-stripe-webhook-secret

# ==========================================
# DEPLOYMENT
# ==========================================
DEPLOYMENT_ENVIRONMENT=production
BUILD_VERSION=v4.0.0
BUILD_DATE=2024-08-22
GIT_COMMIT_SHA=auto-filled-by-ci

# Health check endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/api/health
READY_CHECK_PATH=/api/ready

# ==========================================
# BACKUP AND RECOVERY
# ==========================================
BACKUP_SCHEDULE_ENABLED=true
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_COMPRESSION_ENABLED=true
DISASTER_RECOVERY_ENABLED=true

# Point-in-time recovery
PITR_ENABLED=true
PITR_RETENTION_DAYS=7

# ==========================================
# SCALING CONFIGURATION
# ==========================================
# Auto-scaling
AUTO_SCALING_ENABLED=true
MIN_INSTANCES=2
MAX_INSTANCES=10
TARGET_CPU_UTILIZATION=70

# Load balancing
LOAD_BALANCER_ENABLED=true
LOAD_BALANCER_ALGORITHM=round_robin
STICKY_SESSIONS=false

# ==========================================
# DEVELOPMENT OVERRIDES (set to false in prod)
# ==========================================
DEBUG_MODE=false
MOCK_EXTERNAL_APIS=false
DISABLE_AUTH=false
SKIP_EMAIL_VERIFICATION=false
ENABLE_TEST_ROUTES=false