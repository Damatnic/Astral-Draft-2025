import{u as E,R as n,j as e,m as v}from"./index-COBmtdYu.js";import{u as g}from"./useLeague-Cpfoz4PJ.js";import{E as p}from"./ErrorDisplay-DvGa1LPk.js";import{Q as h}from"./geminiService-1862MQGr.js";import{L as D}from"./LoadingSpinner-DSQnnH7P.js";import{M as x}from"./index-CwQkY9CC.js";const y=()=>{const{state:f,dispatch:t}=E(),{league:a}=g(),[i,N]=n.useState(null),[b,u]=n.useState(!0),[c,o]=n.useState(null),[r,w]=n.useState(a&&a.currentWeek>1?a.currentWeek-1:1),d=a?a.currentWeek-1:0,m=a?`${a.id}_${r}`:"";return n.useEffect(()=>{if(!a||!m||d<1){u(!1);return}const s=f.leagueNewspapers[m];if(s){N(s),u(!1);return}u(!0),o(null),h(a,r).then(l=>{l?(N(l),t({type:"SET_LEAGUE_NEWSPAPER",payload:{key:m,newspaper:l}})):o("The Oracle could not write this week's newspaper.")}).catch(()=>o("An error occurred while consulting the Oracle.")).finally(()=>u(!1))},[a,r,m,f.leagueNewspapers,t,d]),a?d<1?e.jsxDEV(p,{title:"Not Available",message:"The newspaper will be published after Week 1 is complete.",onRetry:()=>t({type:"SET_VIEW",payload:"LEAGUE_HUB"})},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:59,columnNumber:16},void 0):e.jsxDEV("div",{className:"w-full h-full flex flex-col p-4 sm:p-6 lg:p-8 overflow-y-auto",children:[e.jsxDEV("header",{className:"flex-shrink-0 flex justify-between items-center mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"font-display text-3xl sm:text-4xl font-extrabold tracking-wider uppercase text-[var(--text-primary)]",children:"League Newspaper"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:66,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-[var(--text-secondary)] tracking-widest",children:a.name},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:69,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:65,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:()=>w(s=>s-1),disabled:r<=1,className:"px-3 py-1 bg-white/10 rounded-lg text-sm hover:bg-white/20 disabled:opacity-50",children:"<"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:73,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-bold w-24 text-center",children:["Week ",r," Issue"]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:76,columnNumber:25},void 0),e.jsxDEV("button",{onClick:()=>w(s=>s+1),disabled:r>=d,className:"px-3 py-1 bg-white/10 rounded-lg text-sm hover:bg-white/20 disabled:opacity-50",children:">"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:77,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:72,columnNumber:22},void 0),e.jsxDEV("button",{onClick:()=>t({type:"SET_VIEW",payload:"LEAGUE_HUB"}),className:"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20",children:"Back to League Hub"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:81,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:71,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:64,columnNumber:13},void 0),e.jsxDEV("main",{className:"flex-grow glass-pane rounded-2xl overflow-hidden",children:e.jsxDEV("div",{className:"p-6 md:p-8 h-full overflow-y-auto",children:b?e.jsxDEV(D,{text:"The Oracle is on deadline..."},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:88,columnNumber:34},void 0):c?e.jsxDEV(p,{message:c},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:89,columnNumber:30},void 0):i?e.jsxDEV(v.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsxDEV("h2",{className:"font-display text-4xl font-black text-center border-b-4 border-double border-white/50 pb-2 mb-4",children:i.masthead},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:98,columnNumber:29},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxDEV("div",{className:"md:col-span-2 prose prose-sm prose-invert prose-headings:text-cyan-300",children:[e.jsxDEV("h3",{children:i.leadStory.headline},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:103,columnNumber:37},void 0),e.jsxDEV(x,{children:i.leadStory.content},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:104,columnNumber:37},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:102,columnNumber:33},void 0),e.jsxDEV("div",{className:"space-y-6",children:i.articles.map((s,l)=>e.jsxDEV("div",{className:"prose prose-sm prose-invert prose-headings:text-cyan-300",children:[e.jsxDEV("h4",{children:s.headline},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:109,columnNumber:45},void 0),e.jsxDEV(x,{children:s.content},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:110,columnNumber:45},void 0)]},l,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:108,columnNumber:41},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:106,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:101,columnNumber:29},void 0)]},r,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:91,columnNumber:25},void 0):null},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:87,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:86,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:63,columnNumber:9},void 0):e.jsxDEV(p,{title:"Error",message:"Please select a league.",onRetry:()=>t({type:"SET_VIEW",payload:"DASHBOARD"})},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueNewspaperView.tsx",lineNumber:56,columnNumber:16},void 0)};export{y as default};
