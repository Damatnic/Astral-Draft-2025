{"version":3,"file":"SeasonStoryView-DI75ArQZ.js","sources":["../../views/SeasonStoryView.tsx"],"sourcesContent":["\n\nimport React from 'react';\nimport { useAppState } from '../contexts/AppContext';\nimport { useLeague } from '../hooks/useLeague';\nimport { SeasonStory } from '../types';\nimport { generateNarrativeSeasonStory } from '../services/geminiService';\nimport ErrorDisplay from '../components/core/ErrorDisplay';\nimport LoadingSpinner from '../components/ui/LoadingSpinner';\nimport { motion } from 'framer-motion';\nimport ReactMarkdown from 'react-markdown';\n\n\nconst SeasonStoryView: React.FC = () => {\n    const { dispatch } = useAppState();\n    const { league, myTeam } = useLeague();\n    const [storyData, setStoryData] = React.useState<SeasonStory | null>(null);\n    const [isLoading, setIsLoading] = React.useState(true);\n\n    React.useEffect(() => {\n        if (myTeam && league && (league.status === 'COMPLETE' || league.status === 'PLAYOFFS')) {\n            setIsLoading(true);\n            generateNarrativeSeasonStory(myTeam, league)\n                .then(setStoryData)\n                .finally(() => setIsLoading(false));\n        }\n    }, [myTeam, league]);\n    \n    if (!league || !myTeam) {\n        return <ErrorDisplay title=\"Error\" message=\"Could not load league data.\" onRetry={() => dispatch({ type: 'SET_VIEW', payload: 'DASHBOARD' })} />;\n    }\n    \n    if (league.status !== 'COMPLETE' && league.status !== 'PLAYOFFS') {\n        return <ErrorDisplay title=\"Not Ready\" message=\"Your season story will be available once the season is complete.\" onRetry={() => dispatch({ type: 'SET_VIEW', payload: 'TEAM_HUB' })} />;\n    }\n\n    return (\n        <div className=\"w-full h-full flex flex-col p-4 sm:p-6 lg:p-8 overflow-y-auto\">\n            <header className=\"flex-shrink-0 flex justify-between items-center mb-6\">\n                <div>\n                    <h1 className=\"font-display text-3xl sm:text-4xl font-extrabold tracking-wider uppercase text-[var(--text-primary)]\">\n                        My Season Story\n                    </h1>\n                    <p className=\"text-sm text-[var(--text-secondary)] tracking-widest\">{myTeam.name} - {league.name}</p>\n                </div>\n                <button onClick={() => dispatch({ type: 'SET_VIEW', payload: 'TEAM_HUB' })} className=\"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20\">\n                    Back to Team Hub\n                </button>\n            </header>\n            <main className=\"flex-grow max-w-4xl mx-auto w-full glass-pane rounded-2xl overflow-hidden\">\n                 <div className=\"p-6 md:p-8 h-full overflow-y-auto\">\n                    {isLoading ? <LoadingSpinner text=\"The Oracle is chronicling your epic season...\" /> :\n                     storyData ? (\n                        <motion.div\n                            className=\"prose prose-invert prose-headings:text-cyan-300 prose-strong:text-yellow-300\"\n                            {...{\n                                initial: { opacity: 0 },\n                                animate: { opacity: 1 },\n                                transition: { duration: 0.8 },\n                            }}\n                        >\n                             <h1>{storyData.title}</h1>\n                             <ReactMarkdown>{storyData.narrative}</ReactMarkdown>\n                        </motion.div>\n                     ) : (\n                        <ErrorDisplay title=\"Could not generate story\" message=\"The Oracle was unable to write your season's story. Please try again later.\" />\n                     )\n                    }\n                </div>\n            </main>\n        </div>\n    );\n};\n\nexport default SeasonStoryView;\n"],"names":["SeasonStoryView","dispatch","useAppState","league","myTeam","useLeague","storyData","setStoryData","React","isLoading","setIsLoading","generateNarrativeSeasonStory","jsxDEV","ErrorDisplay","this","LoadingSpinner","motion","ReactMarkdown"],"mappings":"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"}