{"version":3,"file":"PlaceClaimModal-C4vQ406T.js","sources":["../../components/icons/LightbulbIcon.tsx","../../components/team/PlaceClaimModal.tsx"],"sourcesContent":["\nimport React from 'react';\n\nexport const LightbulbIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className || \"h-5 w-5\"}>\n        <path d=\"M15 14c.2-1 .7-1.7 1.5-2.5C17.7 10.2 18 9 18 7c0-2.2-1.8-4-4-4S9.8 3.5 9 5.5c-.8 2-.3 3.2.5 4.5.8.8 1.3 1.5 1.5 2.5\" />\n        <path d=\"M9 18h6\" />\n        <path d=\"M10 22h4\" />\n    </svg>\n);","\nimport React from 'react';\nimport { motion } from 'framer-motion';\nimport type { Team, Player, WaiverWireAdvice } from '../../types';\nimport Modal from '../ui/Modal';\nimport { SparklesIcon } from '../icons/SparklesIcon';\nimport { getWaiverWireAdvice } from '../../services/geminiService';\nimport { useLeague } from '../../hooks/useLeague';\n\ninterface PlaceClaimModalProps {\n    playerToAdd: Player;\n    myTeam: Team;\n    leagueId: string;\n    dispatch: React.Dispatch<any>;\n    onClose: () => void;\n}\n\nconst PlaceClaimModal: React.FC<PlaceClaimModalProps> = ({ playerToAdd, myTeam, leagueId, dispatch, onClose }) => {\n    const { league } = useLeague();\n    const [bid, setBid] = React.useState(1);\n    const [playerToDropId, setPlayerToDropId] = React.useState<number | undefined>(myTeam.roster[myTeam.roster.length - 1]?.id);\n    const [advice, setAdvice] = React.useState<WaiverWireAdvice | null>(null);\n    const [isAnalyzing, setIsAnalyzing] = React.useState(false);\n\n    const isFullAiEnabled = league?.settings.aiAssistanceLevel === 'FULL';\n\n    const handleAnalyze = async () => {\n        if (!isFullAiEnabled) return;\n        setIsAnalyzing(true);\n        setAdvice(null);\n        const result = await getWaiverWireAdvice(myTeam, playerToAdd, undefined);\n        setAdvice(result);\n        if (result) {\n            setBid(result.suggestedBid);\n            if(result.optimalDropPlayerId) {\n                setPlayerToDropId(result.optimalDropPlayerId);\n            }\n        }\n        setIsAnalyzing(false);\n    };\n    \n    // Automatically fetch advice on modal open\n    React.useEffect(() => {\n        handleAnalyze();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [playerToAdd.id]);\n\n\n    const handleSubmitClaim = () => {\n        if (bid > myTeam.faab) {\n            dispatch({ type: 'ADD_NOTIFICATION', payload: { message: 'Error: Bid exceeds your FAAB budget.', type: 'SYSTEM' } });\n            return;\n        }\n        if (bid <= 0) {\n            dispatch({ type: 'ADD_NOTIFICATION', payload: { message: 'Error: Bid must be positive.', type: 'SYSTEM' } });\n            return;\n        }\n        dispatch({\n            type: 'PLACE_WAIVER_CLAIM',\n            payload: {\n                leagueId,\n                claim: {\n                    teamId: myTeam.id,\n                    playerId: playerToAdd.id,\n                    bid,\n                    playerToDropId\n                }\n            }\n        });\n        dispatch({ type: 'ADD_NOTIFICATION', payload: { message: `Waiver claim for ${playerToAdd.name} placed!`, type: 'WAIVER' } });\n        onClose();\n    };\n\n    const inputClasses = \"mobile-touch-target w-full bg-black/10 dark:bg-gray-900/50 border border-[var(--panel-border)] rounded-md px-3 py-3 text-sm placeholder:text-[var(--text-secondary)] focus:outline-none focus:ring-2 focus:ring-cyan-400\";\n    const labelClasses = \"block text-sm font-medium text-[var(--text-secondary)] mb-1\";\n\n    return (\n        <Modal onClose={onClose}>\n            <motion.div\n                className=\"glass-pane rounded-xl shadow-2xl w-full max-w-lg\"\n                {...{\n                    initial: { opacity: 0, scale: 0.95 },\n                    animate: { opacity: 1, scale: 1 },\n                    exit: { opacity: 0, scale: 0.95 },\n                }}\n            >\n                <header className=\"p-6 border-b border-[var(--panel-border)] text-center\">\n                    <h2 className=\"text-2xl font-bold font-display\">Place Waiver Claim</h2>\n                    <p className=\"text-lg text-cyan-300\">{playerToAdd.name} ({playerToAdd.position})</p>\n                </header>\n                \n                <main className=\"p-6 space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label htmlFor=\"bid-amount\" className={labelClasses}>Bid Amount (Max: ${myTeam.faab})</label>\n                            <input\n                                id=\"bid-amount\"\n                                type=\"number\"\n                                value={bid}\n                                onChange={e => setBid(Math.max(0, parseInt(e.target.value, 10) || 0))}\n                                className={inputClasses}\n                            />\n                        </div>\n                        <div>\n                             <label htmlFor=\"player-drop\" className={labelClasses}>Player to Drop</label>\n                             <select\n                                id=\"player-drop\"\n                                value={playerToDropId}\n                                onChange={e => setPlayerToDropId(parseInt(e.target.value))}\n                                className={inputClasses}\n                            >\n                                {myTeam.roster.map((p: any) => (\n                                    <option key={p.id} value={p.id}>{p.name} ({p.position})</option>\n                                ))}\n                            </select>\n                        </div>\n                    </div>\n                     {isFullAiEnabled && (advice || isAnalyzing) && (\n                        <div className=\"p-4 border-t border-b border-[var(--panel-border)]\">\n                             <h3 className=\"font-bold text-center text-cyan-300 mb-2\">Oracle's Advice</h3>\n                             {isAnalyzing ? (\n                                 <div className=\"h-14 flex items-center justify-center text-sm text-gray-400\">Consulting the cosmos...</div>\n                             ) : advice && (\n                                <div className=\"text-center\">\n                                    <p className=\"text-xs text-gray-300 italic\">\"{advice.summary}\"</p>\n                                    <p className=\"font-bold text-base mt-1\">Suggested Bid: <span className=\"text-yellow-300\">${advice.suggestedBid}</span></p>\n                                </div>\n                             )}\n                        </div>\n                     )}\n                </main>\n\n                <footer className=\"p-6 flex justify-between items-center gap-4 border-t border-[var(--panel-border)]\">\n                    {isFullAiEnabled ? (\n                        <button onClick={handleAnalyze} disabled={isAnalyzing} className=\"mobile-touch-target flex items-center gap-2 px-4 py-3 bg-transparent border border-cyan-400/50 text-cyan-300 font-bold rounded-lg hover:bg-cyan-400/20 disabled:opacity-50\">\n                            {isAnalyzing ? <div className=\"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin\"></div> : <SparklesIcon />}\n                            Re-Analyze\n                        </button>\n                    ) : (\n                        <div></div> // Placeholder for spacing\n                    )}\n                    <div className=\"flex gap-2\">\n                        <button type=\"button\" onClick={onClose} className=\"mobile-touch-target px-4 py-3 bg-transparent border border-[var(--panel-border)] text-[var(--text-secondary)] font-bold rounded-lg hover:bg-white/10\">Cancel</button>\n                        <button onClick={handleSubmitClaim} className=\"mobile-touch-target px-6 py-3 bg-gradient-to-r from-green-500 to-cyan-500 text-white font-bold rounded-lg\">Submit Claim</button>\n                    </div>\n                </footer>\n            </motion.div>\n        </Modal>\n    );\n};\n\nexport default PlaceClaimModal;\n"],"names":["LightbulbIcon","className","jsxDEV","this","PlaceClaimModal","playerToAdd","myTeam","leagueId","dispatch","onClose","league","useLeague","bid","setBid","React","playerToDropId","setPlayerToDropId","advice","setAdvice","isAnalyzing","setIsAnalyzing","isFullAiEnabled","handleAnalyze","result","getWaiverWireAdvice","handleSubmitClaim","inputClasses","labelClasses","Modal","motion","e","p","SparklesIcon"],"mappings":"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"}