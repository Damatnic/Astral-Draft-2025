{"version":3,"file":"Modal-B7Hn7XWX.js","sources":["../../components/ui/Modal.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useFocusTrap, useAnnouncer } from '../../utils/accessibility';\nimport useSound from '../../hooks/useSound';\n\ninterface ModalProps {\n  onClose: () => void;\n  children: React.ReactNode;\n  title?: string;\n  description?: string;\n}\n\nconst backdropVariants = {\n  hidden: { opacity: 0 },\n  visible: { opacity: 1 },\n  exit: { opacity: 0 },\n};\n\nconst modalVariants = {\n  hidden: { opacity: 0, y: 30, scale: 0.98 },\n  visible: { \n    opacity: 1, y: 0, scale: 1,\n    transition: { type: 'spring' as 'spring', damping: 25, stiffness: 200 } \n  },\n  exit: { \n    opacity: 0, y: 30, scale: 0.98,\n    transition: { duration: 0.2 } \n  },\n};\n\nconst Modal: React.FC<ModalProps> = ({ onClose, children, title, description }) => {\n  const { containerRef } = useFocusTrap(true);\n  const { announce } = useAnnouncer();\n  const playOpenSound = useSound('openModal', 0.3);\n  const playCloseSound = useSound('closeModal', 0.2);\n  const titleId = React.useId();\n  const descriptionId = React.useId();\n\n  React.useEffect(() => {\n    playOpenSound();\n    if (title) {\n      announce(`${title} dialog opened`, 'assertive');\n    }\n  }, [playOpenSound, announce, title]);\n\n  const handleClose = () => {\n    playCloseSound();\n    announce('Dialog closed', 'polite');\n    onClose();\n  };\n\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        handleClose();\n      }\n    };\n    \n    const handleCustomEscape = () => {\n      handleClose();\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    \n    if (containerRef.current) {\n      containerRef.current.addEventListener('focustrap:escape', handleCustomEscape);\n    }\n\n    // Prevent body scroll\n    const originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n      if (containerRef.current) {\n        containerRef.current.removeEventListener('focustrap:escape', handleCustomEscape);\n      }\n      document.body.style.overflow = originalStyle;\n    };\n  }, [handleClose, containerRef]);\n\n  return (\n    <motion.div\n      className=\"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4\"\n      onClick={handleClose}\n      {...{\n        variants: backdropVariants,\n        initial: \"hidden\",\n        animate: \"visible\",\n        exit: \"exit\",\n      }}\n    >\n      <motion.div\n        ref={containerRef as React.RefObject<HTMLDivElement>}\n        className=\"w-full\"\n        onClick={(e: any) => e.stopPropagation()}\n        role=\"dialog\"\n        aria-modal={true}\n        aria-labelledby={title ? titleId : undefined}\n        aria-describedby={description ? descriptionId : undefined}\n        {...{\n            variants: modalVariants,\n            initial: \"hidden\",\n            animate: \"visible\",\n            exit: \"exit\",\n        }}\n      >\n        {/* Screen reader accessibility info */}\n        {title && <div id={titleId} className=\"sr-only\">{title}</div>}\n        {description && <div id={descriptionId} className=\"sr-only\">{description}</div>}\n        \n        {children}\n      </motion.div>\n    </motion.div>\n  );\n};\n\nexport default Modal;\n"],"names":["backdropVariants","modalVariants","Modal","onClose","children","title","description","containerRef","useFocusTrap","announce","useAnnouncer","playOpenSound","useSound","playCloseSound","titleId","React","descriptionId","handleClose","handleKeyDown","event","handleCustomEscape","originalStyle","jsxDEV","motion","e","this"],"mappings":"2EAaA,MAAMA,EAAmB,CACvB,OAAQ,CAAE,QAAS,CAAA,EACnB,QAAS,CAAE,QAAS,CAAA,EACpB,KAAM,CAAE,QAAS,CAAA,CACnB,EAEMC,EAAgB,CACpB,OAAQ,CAAE,QAAS,EAAG,EAAG,GAAI,MAAO,GAAA,EACpC,QAAS,CACP,QAAS,EAAG,EAAG,EAAG,MAAO,EACzB,WAAY,CAAE,KAAM,SAAsB,QAAS,GAAI,UAAW,GAAA,CAAI,EAExE,KAAM,CACJ,QAAS,EAAG,EAAG,GAAI,MAAO,IAC1B,WAAY,CAAE,SAAU,EAAA,CAAI,CAEhC,EAEMC,EAA8B,CAAC,CAAE,QAAAC,EAAS,SAAAC,EAAU,MAAAC,EAAO,YAAAC,KAAkB,CACjF,KAAM,CAAE,aAAAC,CAAA,EAAiBC,EAAa,EAAI,EACpC,CAAE,SAAAC,CAAA,EAAaC,EAAA,EACfC,EAAgBC,EAAS,YAAa,EAAG,EACzCC,EAAiBD,EAAS,aAAc,EAAG,EAC3CE,EAAUC,EAAM,MAAA,EAChBC,EAAgBD,EAAM,MAAA,EAE5BA,EAAM,UAAU,IAAM,CACpBJ,EAAA,EACIN,GACFI,EAAS,GAAGJ,CAAK,iBAAkB,WAAW,CAElD,EAAG,CAACM,EAAeF,EAAUJ,CAAK,CAAC,EAEnC,MAAMY,EAAc,IAAM,CACxBJ,EAAA,EACAJ,EAAS,gBAAiB,QAAQ,EAClCN,EAAA,CACF,EAEA,OAAAY,EAAM,UAAU,IAAM,CACpB,MAAMG,EAAiBC,GAAyB,CAC1CA,EAAM,MAAQ,UAChBF,EAAA,CAEJ,EAEMG,EAAqB,IAAM,CAC/BH,EAAA,CACF,EAEA,SAAS,iBAAiB,UAAWC,CAAa,EAE9CX,EAAa,SACfA,EAAa,QAAQ,iBAAiB,mBAAoBa,CAAkB,EAI9E,MAAMC,EAAgB,OAAO,iBAAiB,SAAS,IAAI,EAAE,SAC7D,gBAAS,KAAK,MAAM,SAAW,SAExB,IAAM,CACX,SAAS,oBAAoB,UAAWH,CAAa,EACjDX,EAAa,SACfA,EAAa,QAAQ,oBAAoB,mBAAoBa,CAAkB,EAEjF,SAAS,KAAK,MAAM,SAAWC,CACjC,CACF,EAAG,CAACJ,EAAaV,CAAY,CAAC,EAG5Be,EAAAA,OAACC,EAAO,IAAP,CACC,UAAU,sEACV,QAASN,EAEP,SAAUjB,EACV,QAAS,SACT,QAAS,UACT,KAAM,OAGR,SAAAsB,EAAAA,OAACC,EAAO,IAAP,CACC,IAAKhB,EACL,UAAU,SACV,QAAUiB,GAAWA,EAAE,gBAAA,EACvB,KAAK,SACL,aAAY,GACZ,kBAAiBnB,EAAQS,EAAU,OACnC,mBAAkBR,EAAcU,EAAgB,OAE5C,SAAUf,EACV,QAAS,SACT,QAAS,UACT,KAAM,OAIT,SAAA,CAAAI,YAAU,MAAA,CAAI,GAAIS,EAAS,UAAU,UAAW,SAAAT,GAAvC,OAAA,GAAA,CAAA,SAAA,6DAAA,WAAA,IAAA,aAAA,EAAA,EAAAoB,MAA6C,EACtDnB,GAAegB,EAAAA,OAAC,MAAA,CAAI,GAAIN,EAAe,UAAU,UAAW,SAAAV,GAA7C,OAAA,GAAA,CAAA,SAAA,6DAAA,WAAA,IAAA,aAAA,EAAA,EAAAmB,MAAyD,EAExErB,CAAA,CAAA,EAnBH,OAAA,GAAA,CAAA,SAAA,6DAAA,WAAA,GAAA,aAAA,CAAA,EAAAqB,MAAA,CAoBA,EA9BF,OAAA,GAAA,CAAA,SAAA,6DAAA,WAAA,GAAA,aAAA,CAAA,EAAAA,MAAA,CAiCJ"}