{"version":3,"file":"KeeperSelectionView-CA77WLUa.js","sources":["../../views/KeeperSelectionView.tsx"],"sourcesContent":["import React from 'react';\nimport { useAppState } from '../contexts/AppContext';\nimport { useLeague } from '../hooks/useLeague';\nimport { Widget } from '../components/ui/Widget';\nimport ErrorDisplay from '../components/core/ErrorDisplay';\nimport { UsersIcon } from '../components/icons/UsersIcon';\nimport type { Player } from '../types';\nimport { Avatar } from '../components/ui/Avatar';\n\nconst KeeperSelectionView: React.FC = () => {\n    const { state, dispatch } = useAppState();\n    const { league, myTeam } = useLeague();\n    const [selectedIds, setSelectedIds] = React.useState<Set<number>>(new Set(myTeam?.keepers || []));\n\n    if (!league || !myTeam) {\n        return <ErrorDisplay title=\"Error\" message=\"Could not load league data.\" onRetry={() => dispatch({ type: 'SET_VIEW', payload: 'DASHBOARD' })} />;\n    }\n    \n    const keeperCount = league.settings.keeperCount || 0;\n\n    if (keeperCount === 0) {\n        return <ErrorDisplay title=\"Not a Keeper League\" message=\"This league is not set up for keepers.\" onRetry={() => dispatch({ type: 'SET_VIEW', payload: 'TEAM_HUB' })} />;\n    }\n\n    const handleTogglePlayer = (playerId: number) => {\n        setSelectedIds(prev => {\n            const newSet = new Set(prev);\n            if (newSet.has(playerId)) {\n                newSet.delete(playerId);\n            } else {\n                if (newSet.size < keeperCount) {\n                    newSet.add(playerId);\n                }\n            }\n            return newSet;\n        });\n    };\n\n    const handleSaveChanges = () => {\n        dispatch({\n            type: 'SET_KEEPERS',\n            payload: { leagueId: league.id, teamId: myTeam.id, keeperPlayerIds: Array.from(selectedIds) }\n        });\n        dispatch({ type: 'ADD_NOTIFICATION', payload: { message: 'Keeper selections saved!', type: 'SYSTEM' } });\n        dispatch({ type: 'SET_VIEW', payload: 'TEAM_HUB' });\n    };\n\n    return (\n        <div className=\"w-full h-full flex flex-col p-4 sm:p-6 lg:p-8 overflow-y-auto\">\n            <header className=\"flex-shrink-0 flex justify-between items-center mb-6\">\n                <div>\n                    <h1 className=\"font-display text-3xl sm:text-4xl font-extrabold tracking-wider uppercase text-[var(--text-primary)]\">\n                        Select Keepers\n                    </h1>\n                    <p className=\"text-sm text-[var(--text-secondary)] tracking-widest\">{league.name}</p>\n                </div>\n                <button onClick={() => dispatch({ type: 'SET_VIEW', payload: 'TEAM_HUB' })} className=\"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20\">\n                    Back to Team Hub\n                </button>\n            </header>\n            <main className=\"flex-grow max-w-3xl mx-auto w-full\">\n                <Widget title={`Select Your Keepers (${selectedIds.size}/${keeperCount})`} icon={<UsersIcon />}>\n                    <div className=\"p-4\">\n                        <p className=\"text-sm text-gray-400 mb-4\">Choose up to {keeperCount} players from your previous season's roster to keep for the upcoming draft. These picks will replace your first {keeperCount} round draft selections.</p>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                            {myTeam.roster.map(player => {\n                                const isSelected = selectedIds.has(player.id);\n                                return (\n                                    <div\n                                        key={player.id}\n                                        onClick={() => handleTogglePlayer(player.id)}\n                                        className={`p-3 rounded-lg flex items-center gap-3 cursor-pointer transition-all ${\n                                            isSelected ? 'bg-cyan-500/30 ring-2 ring-cyan-400' : 'bg-black/20 hover:bg-black/30'\n                                        }`}\n                                    >\n                                        <Avatar avatar={player.astralIntelligence?.spiritAnimal?.[0] || '🏈'} className=\"w-12 h-12 text-3xl rounded-md\" />\n                                        <div>\n                                            <p className=\"font-bold\">{player.name}</p>\n                                            <p className=\"text-xs text-gray-400\">{player.position} - {player.team}</p>\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                        <div className=\"mt-6 flex justify-end\">\n                            <button \n                                onClick={handleSaveChanges}\n                                className=\"px-6 py-2 bg-cyan-500 text-black font-bold text-sm rounded-md\"\n                            >\n                                Save Selections\n                            </button>\n                        </div>\n                    </div>\n                </Widget>\n            </main>\n        </div>\n    );\n};\n\nexport default KeeperSelectionView;"],"names":["KeeperSelectionView","state","dispatch","useAppState","league","myTeam","useLeague","selectedIds","setSelectedIds","React","jsxDEV","ErrorDisplay","this","keeperCount","handleTogglePlayer","playerId","prev","newSet","handleSaveChanges","Widget","UsersIcon","player","isSelected","Avatar"],"mappings":"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"}