import{r as i,j as s}from"./index-COBmtdYu.js";const R=({src:t,alt:n,className:u="",placeholder:r,fallback:m,sizes:E,srcSet:b,loading:d="lazy",onLoad:h,onError:y})=>{const[c,j]=i.useState(!1),[o,N]=i.useState(!1),[f,x]=i.useState(!1),p=i.useRef(null);i.useEffect(()=>{if(d==="eager"){x(!0);return}const e=new IntersectionObserver(([a])=>{a.isIntersecting&&(x(!0),e.disconnect())},{rootMargin:"100px",threshold:.1});return p.current&&e.observe(p.current),()=>{e.disconnect()}},[d]);const D=e=>e.endsWith(".svg")||e.startsWith("data:")||e.startsWith("http")?e:e.replace(/\.(jpg|jpeg|png)$/i,".webp"),w=e=>{if(b)return b;if(e.endsWith(".svg")||e.startsWith("data:")||e.startsWith("http"))return;const a=e.replace(/\.(jpg|jpeg|png|webp)$/i,""),l=/\.(webp|jpg|jpeg|png)$/i.exec(e)?.[1]||"webp";return[`${a}-320w.${l} 320w`,`${a}-640w.${l} 640w`,`${a}-1024w.${l} 1024w`,`${a}-1920w.${l} 1920w`].join(", ")},I=()=>{j(!0),N(!1),h?.()},z=()=>{N(!0),y?.()},L=D(t),g=w(t),v=E||"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw";return s.jsxDEV("div",{ref:p,className:`relative overflow-hidden ${u}`,style:{backgroundColor:!c&&!o?"#f3f4f6":"transparent",minHeight:"20px"},children:[!c&&!o&&f&&s.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 animate-pulse",children:s.jsxDEV("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300 border-t-gray-600 animate-spin"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:136,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:135,columnNumber:9},void 0),!f&&r&&s.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:s.jsxDEV("span",{className:"text-gray-400 text-sm",children:r},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:143,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:142,columnNumber:9},void 0),o&&s.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:m?s.jsxDEV("img",{src:m,alt:n,className:"w-full h-full object-cover",onError:()=>{console.warn(`Failed to load image and fallback: ${t}`)}},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:151,columnNumber:13},void 0):s.jsxDEV("div",{className:"text-gray-400 text-center",children:[s.jsxDEV("div",{className:"w-8 h-8 mx-auto mb-2 bg-gray-300 rounded"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:162,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-xs",children:"Image unavailable"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:163,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:161,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:149,columnNumber:9},void 0),f&&s.jsxDEV("picture",{children:[!t.endsWith(".svg")&&!t.startsWith("data:")&&s.jsxDEV("source",{type:"image/webp",srcSet:g?.replace(/\.(jpg|jpeg|png)/g,".webp"),sizes:v},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:174,columnNumber:13},void 0),s.jsxDEV("img",{src:o?m||t:L,alt:n,className:`w-full h-full object-cover transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,srcSet:g,sizes:v,loading:d,decoding:"async",onLoad:I,onError:z},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:181,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:171,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/LazyImage.tsx",lineNumber:125,columnNumber:5},void 0)},O=({avatar:t,className:n,alt:u="Team avatar",generatedAvatarUrl:r})=>r||t&&(t.startsWith("data:image")||t.startsWith("https"))?s.jsxDEV(R,{src:r||t,alt:u,className:`object-cover bg-black/20 ${n}`,fallback:"https://api.dicebear.com/7.x/avataaars/svg?seed=default",loading:"lazy"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/Avatar.tsx",lineNumber:17,columnNumber:7},void 0):s.jsxDEV("span",{className:`flex items-center justify-center bg-black/10 ${n}`,children:t},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/ui/Avatar.tsx",lineNumber:29,columnNumber:7},void 0);export{O as A,R as L};
