import{p as H}from"./index-COBmtdYu.js";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wn,Nn;function Dn(){return{geminiUrl:wn,vertexUrl:Nn}}function kn(t,e,n,o){var r,l;if(!t?.baseUrl){const a=Dn();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y{}function T(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(t,e,n){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const c=a.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[c])){const f=t[c];if(Array.isArray(n))for(let u=0;u<f.length;u++){const d=f[u];s(d,e.slice(l+1),n[u])}else for(const u of f)s(u,e.slice(l+1),n)}return}else if(a.endsWith("[0]")){const c=a.slice(0,-3);c in t||(t[c]=[{}]);const f=t[c];s(f[0],e.slice(l+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else t[o]=n}function i(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const o=e[n];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in t){const l=t[r];return Array.isArray(l)?l.map(a=>i(a,e.slice(n+1))):void 0}else return}else t=t[o]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ye(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ve;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ve||(Ve={}));var Ge;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ge||(Ge={}));var k;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(k||(k={}));var Be;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Be||(Be={}));var $e;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})($e||($e={}));var qe;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(qe||(qe={}));var He;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(He||(He={}));var Je;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Je||(Je={}));var Ye;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ye||(Ye={}));var We;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(We||(We={}));var Ke;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Ke||(Ke={}));var be;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(be||(be={}));var ze;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ze||(ze={}));var Xe;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xe||(Xe={}));var Qe;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Qe||(Qe={}));var Ze;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ze||(Ze={}));var ae;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ae||(ae={}));var Oe;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Oe||(Oe={}));var ve;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ve||(ve={}));var je;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(je||(je={}));var et;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(et||(et={}));var tt;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(tt||(tt={}));var nt;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(nt||(nt={}));var ot;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(ot||(ot={}));var it;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(it||(it={}));var st;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(st||(st={}));var rt;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rt||(rt={}));var lt;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lt||(lt={}));var at;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(at||(at={}));var ut;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ut||(ut={}));var ct;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ct||(ct={}));var ft;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ft||(ft={}));var dt;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(dt||(dt={}));var pt;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(pt||(pt={}));var mt;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(mt||(mt={}));var gt;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gt||(gt={}));var ht;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ht||(ht={}));var yt;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(yt||(yt={}));var vt;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vt||(vt={}));var Tt;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Tt||(Tt={}));var Ct;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Ct||(Ct={}));var K;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(K||(K={}));class Te{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class te{get text(){var e,n,o,r,l,a,c,f;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const p=[];for(const m of(f=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,n,o,r,l,a,c,f;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const p of(f=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,o,r,l,a,c,f;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(f=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(u?.length!==0)return u}get executableCode(){var e,n,o,r,l,a,c,f,u;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(f=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,o,r,l,a,c,f,u;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(f=(c=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.output}}class St{}class Et{}class Un{}class Fn{}class _t{}class At{}class Mt{}class Ln{}class It{}class Rt{}class Pt{}class xt{}class Vn{}class Gn{}class Bn{}class wt{}class $n{get text(){var e,n,o;let r="",l=!1;const a=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[f,u]of Object.entries(c))f!=="text"&&f!=="thought"&&u!==null&&a.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;l=!0,r+=c.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,n,o;let r="";const l=[];for(const a of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,f]of Object.entries(a))c!=="inlineData"&&f!==null&&l.push(c);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class ue{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const o=new ue;if(o.name=e.name,o.metadata=e.metadata,o.done=e.done,o.error=e.error,n){const r=e.response;if(r){const l=new It,a=r.videos;l.generatedVideos=a?.map(c=>({video:{uri:c.gcsUri,videoBytes:c.bytesBase64Encoded?ye(c.bytesBase64Encoded):void 0,mimeType:c.mimeType}})),l.raiMediaFilteredCount=r.raiMediaFilteredCount,l.raiMediaFilteredReasons=r.raiMediaFilteredReasons,o.response=l}}else{const r=e.response;if(r){const l=new It,a=r.generateVideoResponse,c=a?.generatedSamples;l.generatedVideos=c?.map(f=>{const u=f.video;return{video:{uri:u?.uri,videoBytes:u?.encodedVideo?ye(u?.encodedVideo):void 0,mimeType:f.encoding}}}),l.raiMediaFilteredCount=a?.raiMediaFilteredCount,l.raiMediaFilteredReasons=a?.raiMediaFilteredReasons,o.response=l}}return o}}class qn{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jt(t,e){const n=w(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function en(t){return Array.isArray(t)?t.map(e=>ce(e)):[ce(t)]}function ce(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function tn(t){const e=ce(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nn(t){const e=ce(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Nt(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function on(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Nt(e)):[Nt(t)]}function Ce(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Dt(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function kt(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function L(t){if(t==null)throw new Error("ContentUnion is required");return Ce(t)?t:{role:"user",parts:on(t)}}function sn(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=L(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=L(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>L(n)):[L(e)]}function G(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Dt(t)||kt(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[L(t)]}const e=[],n=[],o=Ce(t[0]);for(const r of t){const l=Ce(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(Dt(r)||kt(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:on(n)}),e}function Hn(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(k).includes(n[0].toUpperCase())?n[0].toUpperCase():k.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(k).includes(o.toUpperCase())?o.toUpperCase():k.TYPE_UNSPECIFIED})}}function b(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&Hn(t.type,e);for(const[a,c]of Object.entries(t))if(c!=null)if(a=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(k).includes(c.toUpperCase())?c.toUpperCase():k.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=b(c);else if(o.includes(a)){const f=[];for(const u of c){if(u.type=="null"){e.nullable=!0;continue}f.push(b(u))}e[a]=f}else if(r.includes(a)){const f={};for(const[u,d]of Object.entries(c))f[u]=b(d);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=c}return e}function we(t){return b(t)}function Ne(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function De(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Q(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=b(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=b(e.response));return t}function Z(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Jn(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function q(t,e){if(typeof e!="string")throw new Error("name must be a string");return Jn(t,e,"cachedContents")}function rn(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function W(t){return ye(t)}function Yn(t){return t!=null&&typeof t=="object"&&"name"in t}function Wn(t){return t!=null&&typeof t=="object"&&"video"in t}function Kn(t){return t!=null&&typeof t=="object"&&"uri"in t}function ln(t){var e;let n;if(Yn(t)&&(n=t.name),!(Kn(t)&&(n=t.uri,n===void 0))&&!(Wn(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function an(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function un(t){for(const e of["models","tunedModels","publisherModels"])if(bn(t,e))return t[e];return[]}function bn(t,e){return t!==null&&typeof t=="object"&&e in t}function zn(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function Xn(t,e={}){const n=[],o=new Set;for(const r of t){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=zn(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function cn(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Qn(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function O(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function fn(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zn(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function On(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function jn(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function eo(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Zn(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],On(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],jn(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function dn(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>eo(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function to(t){const e={},n=i(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&s(e,["default"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["enum"]);l!=null&&s(e,["enum"],l);const a=i(t,["example"]);a!=null&&s(e,["example"],a);const c=i(t,["format"]);c!=null&&s(e,["format"],c);const f=i(t,["items"]);f!=null&&s(e,["items"],f);const u=i(t,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=i(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(t,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(t,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(t,["minProperties"]);y!=null&&s(e,["minProperties"],y);const v=i(t,["minimum"]);v!=null&&s(e,["minimum"],v);const E=i(t,["nullable"]);E!=null&&s(e,["nullable"],E);const C=i(t,["pattern"]);C!=null&&s(e,["pattern"],C);const S=i(t,["properties"]);S!=null&&s(e,["properties"],S);const A=i(t,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const _=i(t,["required"]);_!=null&&s(e,["required"],_);const R=i(t,["title"]);R!=null&&s(e,["title"],R);const P=i(t,["type"]);return P!=null&&s(e,["type"],P),e}function no(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&s(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function oo(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const c=i(t,["response"]);c!=null&&s(e,["response"],c);const f=i(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function io(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function so(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],io(n)),e}function ro(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function lo(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],ro(n)),e}function ao(){return{}}function uo(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(u=>oo(u))),s(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],so(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],lo(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],ao());const a=i(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const c=i(t,["computerUse"]);return c!=null&&s(e,["computerUse"],c),e}function co(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function fo(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function po(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],fo(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function mo(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],co(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],po(o)),e}function go(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function pn(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],go(n)),e}function ho(t){const e={},n=i(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],pn(o)),e}function yo(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ho(r))),s(e,["speakerVoiceConfigs"],o)}return e}function vo(t){const e={},n=i(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],pn(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],yo(o));const r=i(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function To(t){const e={},n=i(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Co(t,e,n){const o={},r=i(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],dn(L(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const c=i(e,["topK"]);c!=null&&s(o,["topK"],c);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const u=i(e,["maxOutputTokens"]);u!=null&&s(o,["maxOutputTokens"],u);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const v=i(e,["responseMimeType"]);v!=null&&s(o,["responseMimeType"],v);const E=i(e,["responseSchema"]);E!=null&&s(o,["responseSchema"],to(we(E)));const C=i(e,["responseJsonSchema"]);if(C!=null&&s(o,["responseJsonSchema"],C),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let x=S;Array.isArray(x)&&(x=x.map(B=>no(B))),s(n,["safetySettings"],x)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let x=Z(A);Array.isArray(x)&&(x=x.map(B=>uo(Q(B)))),s(n,["tools"],x)}const _=i(e,["toolConfig"]);if(n!==void 0&&_!=null&&s(n,["toolConfig"],mo(_)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=i(e,["cachedContent"]);n!==void 0&&R!=null&&s(n,["cachedContent"],q(t,R));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const F=i(e,["mediaResolution"]);F!=null&&s(o,["mediaResolution"],F);const I=i(e,["speechConfig"]);if(I!=null&&s(o,["speechConfig"],vo(Ne(I))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=i(e,["thinkingConfig"]);return N!=null&&s(o,["thinkingConfig"],To(N)),o}function So(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["request","model"],w(t,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(c=>dn(c))),s(n,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["request","generationConfig"],Co(t,l,n)),n}function Eo(t,e){const n={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(n,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>So(t,a))),s(n,["requests","requests"],l)}return n}function _o(t,e){const n={},o=i(t,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Ao(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["src"]);r!=null&&s(n,["batch","inputConfig"],Eo(t,cn(t,r)));const l=i(e,["config"]);return l!=null&&s(n,["config"],_o(l,n)),n}function Mo(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],O(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Io(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],O(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Ro(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Po(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Ro(n,e)),e}function xo(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],O(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function wo(t){const e={},n=i(t,["format"]);n!=null&&s(e,["instancesFormat"],n);const o=i(t,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(t,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function No(t){const e={},n=i(t,["format"]);n!=null&&s(e,["predictionsFormat"],n);const o=i(t,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(t,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function Do(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(t,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],No(Qn(r))),n}function ko(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["model"],w(t,o));const r=i(e,["src"]);r!=null&&s(n,["inputConfig"],wo(cn(t,r)));const l=i(e,["config"]);return l!=null&&s(n,["config"],Do(l,n)),n}function Uo(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],O(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Fo(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],O(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Lo(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function Vo(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Lo(n,e)),e}function Go(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],O(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Bo(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function $o(t){const e={},n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function qo(t){const e={},n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ho(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Bo(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],$o(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],qo(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Jo(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Ho(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function Yo(t){const e={},n=i(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function Wo(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Ko(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Wo(r))),s(e,["urlMetadata"],o)}return e}function bo(t){const e={},n=i(t,["content"]);n!=null&&s(e,["content"],Jo(n));const o=i(t,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Yo(o));const r=i(t,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Ko(a));const c=i(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);const f=i(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const u=i(t,["index"]);u!=null&&s(e,["index"],u);const d=i(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function zo(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>bo(f))),s(e,["candidates"],c)}const r=i(t,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(t,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(t,["usageMetadata"]);return a!=null&&s(e,["usageMetadata"],a),e}function mn(t){const e={},n=i(t,["details"]);n!=null&&s(e,["details"],n);const o=i(t,["code"]);o!=null&&s(e,["code"],o);const r=i(t,["message"]);return r!=null&&s(e,["message"],r),e}function Xo(t){const e={},n=i(t,["response"]);n!=null&&s(e,["response"],zo(n));const o=i(t,["error"]);return o!=null&&s(e,["error"],mn(o)),e}function Qo(t){const e={},n=i(t,["responsesFile"]);n!=null&&s(e,["fileName"],n);const o=i(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>Xo(l))),s(e,["inlinedResponses"],r)}return e}function Se(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["metadata","state"]);r!=null&&s(e,["state"],fn(r));const l=i(t,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(t,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const c=i(t,["metadata","updateTime"]);c!=null&&s(e,["updateTime"],c);const f=i(t,["metadata","model"]);f!=null&&s(e,["model"],f);const u=i(t,["metadata","output"]);return u!=null&&s(e,["dest"],Qo(u)),e}function Zo(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Se(a))),s(e,["batchJobs"],l)}return e}function Oo(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["done"]);o!=null&&s(e,["done"],o);const r=i(t,["error"]);return r!=null&&s(e,["error"],mn(r)),e}function gn(t){const e={},n=i(t,["details"]);n!=null&&s(e,["details"],n);const o=i(t,["code"]);o!=null&&s(e,["code"],o);const r=i(t,["message"]);return r!=null&&s(e,["message"],r),e}function jo(t){const e={},n=i(t,["instancesFormat"]);n!=null&&s(e,["format"],n);const o=i(t,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(t,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function ei(t){const e={},n=i(t,["predictionsFormat"]);n!=null&&s(e,["format"],n);const o=i(t,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(t,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function Ee(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["state"]);r!=null&&s(e,["state"],fn(r));const l=i(t,["error"]);l!=null&&s(e,["error"],gn(l));const a=i(t,["createTime"]);a!=null&&s(e,["createTime"],a);const c=i(t,["startTime"]);c!=null&&s(e,["startTime"],c);const f=i(t,["endTime"]);f!=null&&s(e,["endTime"],f);const u=i(t,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=i(t,["model"]);d!=null&&s(e,["model"],d);const p=i(t,["inputConfig"]);p!=null&&s(e,["src"],jo(p));const m=i(t,["outputConfig"]);return m!=null&&s(e,["dest"],ei(m)),e}function ti(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ee(a))),s(e,["batchJobs"],l)}return e}function ni(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["done"]);o!=null&&s(e,["done"],o);const r=i(t,["error"]);return r!=null&&s(e,["error"],gn(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var J;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(J||(J={}));class oe{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oi extends Y{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${r}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new oe(J.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}async createInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=ko(this.apiClient,e);return c=T("batchPredictionJobs",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}else{const u=Ao(this.apiClient,e);return c=T("{model}:batchGenerateContent",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Se(d))}}async get(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Uo(this.apiClient,e);return c=T("batchPredictionJobs/{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}else{const u=Mo(this.apiClient,e);return c=T("batches/{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Se(d))}}async cancel(e){var n,o,r,l;let a="",c={};if(this.apiClient.isVertexAI()){const f=Fo(this.apiClient,e);a=T("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const f=Io(this.apiClient,e);a=T("batches/{name}:cancel",f._url),c=f._query,delete f.config,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Vo(e);return c=T("batchPredictionJobs",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ti(d),m=new wt;return Object.assign(m,p),m})}else{const u=Po(e);return c=T("batches",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Zo(d),m=new wt;return Object.assign(m,p),m})}}async delete(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Go(this.apiClient,e);return c=T("batchPredictionJobs/{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>ni(d))}else{const u=xo(this.apiClient,e);return c=T("batches/{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Oo(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ii(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function si(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ri(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function li(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],ii(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],si(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],ri(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Ut(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>li(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function ai(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const c=i(t,["response"]);c!=null&&s(e,["response"],c);const f=i(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ui(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function ci(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],ui(n)),e}function fi(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function di(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],fi(n)),e}function pi(){return{}}function mi(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(u=>ai(u))),s(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],ci(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],di(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],pi());const a=i(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const c=i(t,["computerUse"]);return c!=null&&s(e,["computerUse"],c),e}function gi(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function hi(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function yi(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],hi(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function vi(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],gi(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],yi(o)),e}function Ti(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let d=G(a);Array.isArray(d)&&(d=d.map(p=>Ut(p))),s(e,["contents"],d)}const c=i(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],Ut(L(c)));const f=i(t,["tools"]);if(e!==void 0&&f!=null){let d=f;Array.isArray(d)&&(d=d.map(p=>mi(p))),s(e,["tools"],d)}const u=i(t,["toolConfig"]);if(e!==void 0&&u!=null&&s(e,["toolConfig"],vi(u)),i(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Ci(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["model"],jt(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Ti(r,n)),n}function Si(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Ei(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function _i(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),n}function Ai(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],_i(r,n)),n}function Mi(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function Ii(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Mi(n,e)),e}function Ri(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Pi(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function xi(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function wi(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Ri(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Pi(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],xi(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Ft(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>wi(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function Ni(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&s(e,["description"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&s(e,["response"],a);const c=i(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Di(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function ki(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Di(n)),e}function Ui(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Fi(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Ui(n)),e}function Li(){return{}}function Vi(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function Gi(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],Vi(n));const o=i(t,["authType"]);o!=null&&s(e,["authType"],o);const r=i(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const c=i(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function Bi(t){const e={},n=i(t,["authConfig"]);return n!=null&&s(e,["authConfig"],Gi(n)),e}function $i(){return{}}function qi(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Ni(m))),s(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],ki(r));const l=i(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Fi(l)),i(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],Li());const c=i(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],Bi(c)),i(t,["urlContext"])!=null&&s(e,["urlContext"],$i());const u=i(t,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=i(t,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function Hi(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Ji(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Yi(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],Ji(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Wi(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Hi(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Yi(o)),e}function Ki(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(t,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(t,["contents"]);if(e!==void 0&&a!=null){let p=G(a);Array.isArray(p)&&(p=p.map(m=>Ft(m))),s(e,["contents"],p)}const c=i(t,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],Ft(L(c)));const f=i(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>qi(m))),s(e,["tools"],p)}const u=i(t,["toolConfig"]);e!==void 0&&u!=null&&s(e,["toolConfig"],Wi(u));const d=i(t,["kmsKeyName"]);return e!==void 0&&d!=null&&s(e,["encryption_spec","kmsKeyName"],d),n}function bi(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["model"],jt(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Ki(r,n)),n}function zi(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Xi(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Qi(t,e){const n={},o=i(t,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(t,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),n}function Zi(t,e){const n={},o=i(e,["name"]);o!=null&&s(n,["_url","name"],q(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Qi(r,n)),n}function Oi(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function ji(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Oi(n,e)),e}function re(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["model"]);r!=null&&s(e,["model"],r);const l=i(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const c=i(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);const f=i(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function es(){return{}}function ts(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>re(a))),s(e,["cachedContents"],l)}return e}function le(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["model"]);r!=null&&s(e,["model"],r);const l=i(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(t,["updateTime"]);a!=null&&s(e,["updateTime"],a);const c=i(t,["expireTime"]);c!=null&&s(e,["expireTime"],c);const f=i(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function ns(){return{}}function os(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>le(a))),s(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class is extends Y{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oe(J.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=bi(this.apiClient,e);return c=T("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>le(d))}else{const u=Ci(this.apiClient,e);return c=T("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}}async get(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=zi(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>le(d))}else{const u=Si(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}}async delete(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Xi(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(()=>{const d=ns(),p=new Pt;return Object.assign(p,d),p})}else{const u=Ei(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=es(),p=new Pt;return Object.assign(p,d),p})}}async update(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Zi(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>le(d))}else{const u=Ai(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}}async listInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=ji(e);return c=T("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=os(d),m=new xt;return Object.assign(m,p),m})}else{const u=Ii(e);return c=T("cachedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ts(d),m=new xt;return Object.assign(m,p),m})}}}function Lt(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(t){return this instanceof D?(this.v=t,this):new D(t)}function z(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function c(g,h){o[g]&&(r[g]=function(y){return new Promise(function(v,E){l.push([g,y,v,E])>1||f(g,y)})},h&&(r[g]=h(r[g])))}function f(g,h){try{u(o[g](h))}catch(y){m(l[0][3],y)}}function u(g){g.value instanceof D?Promise.resolve(g.value.v).then(d,p):m(l[0][2],g)}function d(g){f("next",g)}function p(g){f("throw",g)}function m(g,h){g(h),l.shift(),l.length&&f(l[0][0],l[0][1])}}function ne(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Lt=="function"?Lt(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(l){n[l]=t[l]&&function(a){return new Promise(function(c,f){a=t[l](a),r(c,f,a.done,a.value)})}}function r(l,a,c,f){Promise.resolve(f).then(function(u){l({value:u,done:c})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ss(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:hn(n)}function hn(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function rs(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Vt(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let l=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),l&&!hn(t[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class ls{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new as(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class as{constructor(e,n,o,r={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),rs(l)}async sendMessage(e){var n;await this.sendPromise;const o=L(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,a,c;const f=await r,u=(a=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,d=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];d!=null&&(m=(c=d.slice(p))!==null&&c!==void 0?c:[]);const g=u?[u]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=L(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const n=e?Vt(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,r;return z(this,arguments,function*(){var a,c,f,u;const d=[];try{for(var p=!0,m=ne(e),g;g=yield D(m.next()),a=g.done,!a;p=!0){u=g.value,p=!1;const h=u;if(ss(h)){const y=(r=(o=h.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;y!==void 0&&d.push(y)}yield yield D(h)}}catch(h){c={error:h}}finally{try{!p&&!a&&(f=m.return)&&(yield D(f.call(m)))}finally{if(c)throw c.error}}this.recordHistory(n,d)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(l=>l.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Vt(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fe extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,fe.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function us(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),n}function cs(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],us(n,e)),e}function fs(t){const e={},n=i(t,["details"]);n!=null&&s(e,["details"],n);const o=i(t,["message"]);o!=null&&s(e,["message"],o);const r=i(t,["code"]);return r!=null&&s(e,["code"],r),e}function ds(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&s(e,["createTime"],a);const c=i(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);const f=i(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);const u=i(t,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=i(t,["uri"]);d!=null&&s(e,["uri"],d);const p=i(t,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&s(e,["state"],m);const g=i(t,["source"]);g!=null&&s(e,["source"],g);const h=i(t,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(t,["error"]);return y!=null&&s(e,["error"],fs(y)),e}function ps(t){const e={},n=i(t,["file"]);n!=null&&s(e,["file"],ds(n));const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function ms(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","file"],ln(n));const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function gs(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","file"],ln(n));const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function hs(t){const e={},n=i(t,["details"]);n!=null&&s(e,["details"],n);const o=i(t,["message"]);o!=null&&s(e,["message"],o);const r=i(t,["code"]);return r!=null&&s(e,["code"],r),e}function _e(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(t,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(t,["createTime"]);a!=null&&s(e,["createTime"],a);const c=i(t,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);const f=i(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);const u=i(t,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=i(t,["uri"]);d!=null&&s(e,["uri"],d);const p=i(t,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(t,["state"]);m!=null&&s(e,["state"],m);const g=i(t,["source"]);g!=null&&s(e,["source"],g);const h=i(t,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(t,["error"]);return y!=null&&s(e,["error"],hs(y)),e}function ys(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>_e(a))),s(e,["files"],l)}return e}function vs(t){const e={},n=i(t,["sdkHttpResponse"]);return n!=null&&s(e,["sdkHttpResponse"],n),e}function Ts(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cs extends Y{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oe(J.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>_e(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cs(e);return l=T("files",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const u=ys(f),d=new Vn;return Object.assign(d,u),d})}}async createInternal(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ps(e);return l=T("upload/v1beta/files",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>{const u=vs(f),d=new Gn;return Object.assign(d,u),d})}}async get(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ms(e);return l=T("files/{file}",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>_e(f))}}async delete(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=gs(e);return l=T("files/{file}",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(()=>{const f=Ts(),u=new Bn;return Object.assign(u,f),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ss(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function yn(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Ss(n)),e}function Es(t){const e={},n=i(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],yn(o)),e}function _s(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Es(r))),s(e,["speakerVoiceConfigs"],o)}return e}function As(t){const e={},n=i(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],yn(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],_s(o));const r=i(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Ms(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Is(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Rs(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ps(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Ms(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Is(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],Rs(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function xs(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Ps(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function ws(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const c=i(t,["response"]);c!=null&&s(e,["response"],c);const f=i(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Ns(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ds(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Ns(n)),e}function ks(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Us(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],ks(n)),e}function Fs(){return{}}function Ls(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(u=>ws(u))),s(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],Ds(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Us(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],Fs());const a=i(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const c=i(t,["computerUse"]);return c!=null&&s(e,["computerUse"],c),e}function Vs(t){const e={},n=i(t,["handle"]);if(n!=null&&s(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Gt(){return{}}function Gs(t){const e={},n=i(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Bs(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Gs(n));const o=i(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function $s(t){const e={},n=i(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function qs(t){const e={},n=i(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],$s(o)),e}function Hs(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function Js(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const c=i(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);const f=i(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const u=i(t,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],As(De(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],xs(L(g)));const h=i(t,["tools"]);if(e!==void 0&&h!=null){let _=Z(h);Array.isArray(_)&&(_=_.map(R=>Ls(Q(R)))),s(e,["setup","tools"],_)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Vs(y));const v=i(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","inputAudioTranscription"],Gt());const E=i(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],Gt());const C=i(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&s(e,["setup","realtimeInputConfig"],Bs(C));const S=i(t,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],qs(S));const A=i(t,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Hs(A)),n}function Ys(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["setup","model"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Js(r,n)),n}function Ws(){return{}}function Ks(){return{}}function bs(t){const e={},n=i(t,["media"]);n!=null&&s(e,["mediaChunks"],en(n));const o=i(t,["audio"]);o!=null&&s(e,["audio"],nn(o));const r=i(t,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(t,["video"]);l!=null&&s(e,["video"],tn(l));const a=i(t,["text"]);return a!=null&&s(e,["text"],a),i(t,["activityStart"])!=null&&s(e,["activityStart"],Ws()),i(t,["activityEnd"])!=null&&s(e,["activityEnd"],Ks()),e}function vn(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["weight"]);return o!=null&&s(e,["weight"],o),e}function zs(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>vn(r))),s(e,["weightedPrompts"],o)}return e}function Tn(t){const e={},n=i(t,["temperature"]);n!=null&&s(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&s(e,["topK"],o);const r=i(t,["seed"]);r!=null&&s(e,["seed"],r);const l=i(t,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&s(e,["bpm"],a);const c=i(t,["density"]);c!=null&&s(e,["density"],c);const f=i(t,["brightness"]);f!=null&&s(e,["brightness"],f);const u=i(t,["scale"]);u!=null&&s(e,["scale"],u);const d=i(t,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=i(t,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);return m!=null&&s(e,["onlyBassAndDrums"],m),e}function Xs(t){const e={},n=i(t,["musicGenerationConfig"]);return n!=null&&s(e,["musicGenerationConfig"],Tn(n)),e}function Cn(t){const e={},n=i(t,["model"]);return n!=null&&s(e,["model"],n),e}function Sn(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>vn(r))),s(e,["weightedPrompts"],o)}return e}function Ae(t){const e={},n=i(t,["setup"]);n!=null&&s(e,["setup"],Cn(n));const o=i(t,["clientContent"]);o!=null&&s(e,["clientContent"],Sn(o));const r=i(t,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],Tn(r));const l=i(t,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function Qs(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Zs(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Qs(n)),e}function Os(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],Zs(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function js(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function er(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function tr(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function nr(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],js(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],er(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],tr(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function or(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>nr(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function ir(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&s(e,["description"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&s(e,["response"],a);const c=i(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function sr(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function rr(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],sr(n)),e}function lr(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ar(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],lr(n)),e}function ur(){return{}}function cr(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function fr(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],cr(n));const o=i(t,["authType"]);o!=null&&s(e,["authType"],o);const r=i(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const c=i(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function dr(t){const e={},n=i(t,["authConfig"]);return n!=null&&s(e,["authConfig"],fr(n)),e}function pr(){return{}}function mr(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>ir(m))),s(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],rr(r));const l=i(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],ar(l)),i(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],ur());const c=i(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],dr(c)),i(t,["urlContext"])!=null&&s(e,["urlContext"],pr());const u=i(t,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=i(t,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function gr(t){const e={},n=i(t,["handle"]);n!=null&&s(e,["handle"],n);const o=i(t,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function Bt(){return{}}function hr(t){const e={},n=i(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function yr(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],hr(n));const o=i(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function vr(t){const e={},n=i(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function Tr(t){const e={},n=i(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],vr(o)),e}function Cr(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function Sr(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const c=i(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);const f=i(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const u=i(t,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Os(De(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],or(L(g)));const h=i(t,["tools"]);if(e!==void 0&&h!=null){let _=Z(h);Array.isArray(_)&&(_=_.map(R=>mr(Q(R)))),s(e,["setup","tools"],_)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],gr(y));const v=i(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","inputAudioTranscription"],Bt());const E=i(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],Bt());const C=i(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&s(e,["setup","realtimeInputConfig"],yr(C));const S=i(t,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Tr(S));const A=i(t,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Cr(A)),n}function Er(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["setup","model"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Sr(r,n)),n}function _r(){return{}}function Ar(){return{}}function Mr(t){const e={},n=i(t,["media"]);n!=null&&s(e,["mediaChunks"],en(n));const o=i(t,["audio"]);o!=null&&s(e,["audio"],nn(o));const r=i(t,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(t,["video"]);l!=null&&s(e,["video"],tn(l));const a=i(t,["text"]);return a!=null&&s(e,["text"],a),i(t,["activityStart"])!=null&&s(e,["activityStart"],_r()),i(t,["activityEnd"])!=null&&s(e,["activityEnd"],Ar()),e}function Ir(){return{}}function Rr(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Pr(t){const e={},n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function xr(t){const e={},n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function wr(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Rr(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Pr(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],xr(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Nr(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>wr(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function $t(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["finished"]);return o!=null&&s(e,["finished"],o),e}function Dr(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function kr(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Dr(r))),s(e,["urlMetadata"],o)}return e}function Ur(t){const e={},n=i(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],Nr(n));const o=i(t,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(t,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const c=i(t,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],$t(c));const f=i(t,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],$t(f));const u=i(t,["urlContextMetadata"]);return u!=null&&s(e,["urlContextMetadata"],kr(u)),e}function Fr(t){const e={},n=i(t,["id"]);n!=null&&s(e,["id"],n);const o=i(t,["args"]);o!=null&&s(e,["args"],o);const r=i(t,["name"]);return r!=null&&s(e,["name"],r),e}function Lr(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Fr(r))),s(e,["functionCalls"],o)}return e}function Vr(t){const e={},n=i(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function ie(t){const e={},n=i(t,["modality"]);n!=null&&s(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function Gr(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(t,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const c=i(t,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);const f=i(t,["promptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>ie(g))),s(e,["promptTokensDetails"],m)}const u=i(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>ie(g))),s(e,["cacheTokensDetails"],m)}const d=i(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>ie(g))),s(e,["responseTokensDetails"],m)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>ie(g))),s(e,["toolUsePromptTokensDetails"],m)}return e}function Br(t){const e={},n=i(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function $r(t){const e={},n=i(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(t,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function qr(t){const e={};i(t,["setupComplete"])!=null&&s(e,["setupComplete"],Ir());const o=i(t,["serverContent"]);o!=null&&s(e,["serverContent"],Ur(o));const r=i(t,["toolCall"]);r!=null&&s(e,["toolCall"],Lr(r));const l=i(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Vr(l));const a=i(t,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Gr(a));const c=i(t,["goAway"]);c!=null&&s(e,["goAway"],Br(c));const f=i(t,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],$r(f)),e}function Hr(){return{}}function Jr(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["weight"]);return o!=null&&s(e,["weight"],o),e}function Yr(t){const e={},n=i(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Jr(r))),s(e,["weightedPrompts"],o)}return e}function Wr(t){const e={},n=i(t,["temperature"]);n!=null&&s(e,["temperature"],n);const o=i(t,["topK"]);o!=null&&s(e,["topK"],o);const r=i(t,["seed"]);r!=null&&s(e,["seed"],r);const l=i(t,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(t,["bpm"]);a!=null&&s(e,["bpm"],a);const c=i(t,["density"]);c!=null&&s(e,["density"],c);const f=i(t,["brightness"]);f!=null&&s(e,["brightness"],f);const u=i(t,["scale"]);u!=null&&s(e,["scale"],u);const d=i(t,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=i(t,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(t,["onlyBassAndDrums"]);return m!=null&&s(e,["onlyBassAndDrums"],m),e}function Kr(t){const e={},n=i(t,["clientContent"]);n!=null&&s(e,["clientContent"],Yr(n));const o=i(t,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],Wr(o)),e}function br(t){const e={},n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);o!=null&&s(e,["mimeType"],o);const r=i(t,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],Kr(r)),e}function zr(t){const e={},n=i(t,["audioChunks"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>br(r))),s(e,["audioChunks"],o)}return e}function Xr(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function Qr(t){const e={};i(t,["setupComplete"])!=null&&s(e,["setupComplete"],Hr());const o=i(t,["serverContent"]);o!=null&&s(e,["serverContent"],zr(o));const r=i(t,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],Xr(r)),e}function Zr(t){const e={},n=i(t,["sessionId"]);return n!=null&&s(e,["sessionId"],n),e}function Or(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function jr(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function el(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function tl(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Or(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],jr(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],el(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function nl(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>tl(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function qt(t){const e={},n=i(t,["text"]);n!=null&&s(e,["text"],n);const o=i(t,["finished"]);return o!=null&&s(e,["finished"],o),e}function ol(t){const e={},n=i(t,["modelTurn"]);n!=null&&s(e,["modelTurn"],nl(n));const o=i(t,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(t,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(t,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(t,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const c=i(t,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],qt(c));const f=i(t,["outputTranscription"]);return f!=null&&s(e,["outputTranscription"],qt(f)),e}function il(t){const e={},n=i(t,["args"]);n!=null&&s(e,["args"],n);const o=i(t,["name"]);return o!=null&&s(e,["name"],o),e}function sl(t){const e={},n=i(t,["functionCalls"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>il(r))),s(e,["functionCalls"],o)}return e}function rl(t){const e={},n=i(t,["ids"]);return n!=null&&s(e,["ids"],n),e}function se(t){const e={},n=i(t,["modality"]);n!=null&&s(e,["modality"],n);const o=i(t,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function ll(t){const e={},n=i(t,["promptTokenCount"]);n!=null&&s(e,["promptTokenCount"],n);const o=i(t,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(t,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(t,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(t,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const c=i(t,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);const f=i(t,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(h=>se(h))),s(e,["promptTokensDetails"],g)}const u=i(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(h=>se(h))),s(e,["cacheTokensDetails"],g)}const d=i(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>se(h))),s(e,["responseTokensDetails"],g)}const p=i(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>se(h))),s(e,["toolUsePromptTokensDetails"],g)}const m=i(t,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function al(t){const e={},n=i(t,["timeLeft"]);return n!=null&&s(e,["timeLeft"],n),e}function ul(t){const e={},n=i(t,["newHandle"]);n!=null&&s(e,["newHandle"],n);const o=i(t,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(t,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function cl(t){const e={},n=i(t,["setupComplete"]);n!=null&&s(e,["setupComplete"],Zr(n));const o=i(t,["serverContent"]);o!=null&&s(e,["serverContent"],ol(o));const r=i(t,["toolCall"]);r!=null&&s(e,["toolCall"],sl(r));const l=i(t,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],rl(l));const a=i(t,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],ll(a));const c=i(t,["goAway"]);c!=null&&s(e,["goAway"],al(c));const f=i(t,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],ul(f)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fl(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function dl(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function pl(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ml(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],fl(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],dl(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],pl(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function de(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>ml(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function gl(t){const e={},n=i(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&s(e,["default"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["enum"]);l!=null&&s(e,["enum"],l);const a=i(t,["example"]);a!=null&&s(e,["example"],a);const c=i(t,["format"]);c!=null&&s(e,["format"],c);const f=i(t,["items"]);f!=null&&s(e,["items"],f);const u=i(t,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=i(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(t,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(t,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(t,["minProperties"]);y!=null&&s(e,["minProperties"],y);const v=i(t,["minimum"]);v!=null&&s(e,["minimum"],v);const E=i(t,["nullable"]);E!=null&&s(e,["nullable"],E);const C=i(t,["pattern"]);C!=null&&s(e,["pattern"],C);const S=i(t,["properties"]);S!=null&&s(e,["properties"],S);const A=i(t,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const _=i(t,["required"]);_!=null&&s(e,["required"],_);const R=i(t,["title"]);R!=null&&s(e,["title"],R);const P=i(t,["type"]);return P!=null&&s(e,["type"],P),e}function hl(t){const e={};if(i(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=i(t,["category"]);n!=null&&s(e,["category"],n);const o=i(t,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function yl(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const c=i(t,["response"]);c!=null&&s(e,["response"],c);const f=i(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function vl(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Tl(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],vl(n)),e}function Cl(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Sl(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],Cl(n)),e}function El(){return{}}function _l(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(u=>yl(u))),s(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],Tl(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Sl(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],El());const a=i(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const c=i(t,["computerUse"]);return c!=null&&s(e,["computerUse"],c),e}function Al(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Ml(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Il(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],Ml(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Rl(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],Al(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Il(o)),e}function Pl(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function En(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Pl(n)),e}function xl(t){const e={},n=i(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],En(o)),e}function wl(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>xl(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Nl(t){const e={},n=i(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],En(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],wl(o));const r=i(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Dl(t){const e={},n=i(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function kl(t,e,n){const o={},r=i(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],de(L(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const c=i(e,["topK"]);c!=null&&s(o,["topK"],c);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const u=i(e,["maxOutputTokens"]);u!=null&&s(o,["maxOutputTokens"],u);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const v=i(e,["responseMimeType"]);v!=null&&s(o,["responseMimeType"],v);const E=i(e,["responseSchema"]);E!=null&&s(o,["responseSchema"],gl(we(E)));const C=i(e,["responseJsonSchema"]);if(C!=null&&s(o,["responseJsonSchema"],C),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(n!==void 0&&S!=null){let x=S;Array.isArray(x)&&(x=x.map(B=>hl(B))),s(n,["safetySettings"],x)}const A=i(e,["tools"]);if(n!==void 0&&A!=null){let x=Z(A);Array.isArray(x)&&(x=x.map(B=>_l(Q(B)))),s(n,["tools"],x)}const _=i(e,["toolConfig"]);if(n!==void 0&&_!=null&&s(n,["toolConfig"],Rl(_)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=i(e,["cachedContent"]);n!==void 0&&R!=null&&s(n,["cachedContent"],q(t,R));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const F=i(e,["mediaResolution"]);F!=null&&s(o,["mediaResolution"],F);const I=i(e,["speechConfig"]);if(I!=null&&s(o,["speechConfig"],Nl(Ne(I))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=i(e,["thinkingConfig"]);return N!=null&&s(o,["thinkingConfig"],Dl(N)),o}function Ht(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(c=>de(c))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["generationConfig"],kl(t,l,n)),n}function Ul(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(t,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Fl(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["contents"]);r!=null&&s(n,["requests[]","content"],sn(t,r));const l=i(e,["config"]);l!=null&&s(n,["config"],Ul(l,n));const a=i(e,["model"]);return a!==void 0&&s(n,["requests[]","model"],w(t,a)),n}function Ll(t,e){const n={};if(i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(t,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(t,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(t,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const c=i(t,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const f=i(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&s(e,["parameters","includeSafetyAttributes"],f);const u=i(t,["includeRaiReason"]);e!==void 0&&u!=null&&s(e,["parameters","includeRaiReason"],u);const d=i(t,["language"]);e!==void 0&&d!=null&&s(e,["parameters","language"],d);const p=i(t,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(i(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Vl(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(n,["config"],Ll(l,n)),n}function Gl(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Bl(t,e,n){const o={},r=i(e,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&s(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const c=i(e,["queryBase"]);return n!==void 0&&c!=null&&s(n,["_url","models_url"],an(t,c)),o}function $l(t,e){const n={},o=i(e,["config"]);return o!=null&&s(n,["config"],Bl(t,o,n)),n}function ql(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function Hl(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],ql(r,n)),n}function Jl(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Yl(t){const e={};if(i(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Wl(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(c=>de(c))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["config"],Yl(l)),n}function Kl(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=i(t,["imageBytes"]);n!=null&&s(e,["bytesBase64Encoded"],W(n));const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function bl(t,e){const n={},o=i(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(t,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(t,["aspectRatio"]);if(e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l),i(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=i(t,["personGeneration"]);if(e!==void 0&&a!=null&&s(e,["parameters","personGeneration"],a),i(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=i(t,["negativePrompt"]);e!==void 0&&c!=null&&s(e,["parameters","negativePrompt"],c);const f=i(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&s(e,["parameters","enhancePrompt"],f),i(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function zl(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["image"]);if(l!=null&&s(n,["instances[0]","image"],Kl(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["config"]);return a!=null&&s(n,["config"],bl(a,n)),n}function Xl(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ql(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Zl(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ol(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Xl(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Ql(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],Zl(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function j(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Ol(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function jl(t){const e={},n=i(t,["anyOf"]);n!=null&&s(e,["anyOf"],n);const o=i(t,["default"]);o!=null&&s(e,["default"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["enum"]);l!=null&&s(e,["enum"],l);const a=i(t,["example"]);a!=null&&s(e,["example"],a);const c=i(t,["format"]);c!=null&&s(e,["format"],c);const f=i(t,["items"]);f!=null&&s(e,["items"],f);const u=i(t,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=i(t,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(t,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(t,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(t,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(t,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(t,["minProperties"]);y!=null&&s(e,["minProperties"],y);const v=i(t,["minimum"]);v!=null&&s(e,["minimum"],v);const E=i(t,["nullable"]);E!=null&&s(e,["nullable"],E);const C=i(t,["pattern"]);C!=null&&s(e,["pattern"],C);const S=i(t,["properties"]);S!=null&&s(e,["properties"],S);const A=i(t,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const _=i(t,["required"]);_!=null&&s(e,["required"],_);const R=i(t,["title"]);R!=null&&s(e,["title"],R);const P=i(t,["type"]);return P!=null&&s(e,["type"],P),e}function ea(t){const e={},n=i(t,["featureSelectionPreference"]);return n!=null&&s(e,["featureSelectionPreference"],n),e}function ta(t){const e={},n=i(t,["method"]);n!=null&&s(e,["method"],n);const o=i(t,["category"]);o!=null&&s(e,["category"],o);const r=i(t,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function na(t){const e={};if(i(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=i(t,["description"]);n!=null&&s(e,["description"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(t,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(t,["response"]);a!=null&&s(e,["response"],a);const c=i(t,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function oa(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function ia(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],oa(n)),e}function sa(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ra(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],sa(n)),e}function la(){return{}}function aa(t){const e={},n=i(t,["apiKeyString"]);return n!=null&&s(e,["apiKeyString"],n),e}function ua(t){const e={},n=i(t,["apiKeyConfig"]);n!=null&&s(e,["apiKeyConfig"],aa(n));const o=i(t,["authType"]);o!=null&&s(e,["authType"],o);const r=i(t,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(t,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(t,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const c=i(t,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function ca(t){const e={},n=i(t,["authConfig"]);return n!=null&&s(e,["authConfig"],ua(n)),e}function fa(){return{}}function _n(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>na(m))),s(e,["functionDeclarations"],p)}const o=i(t,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(t,["googleSearch"]);r!=null&&s(e,["googleSearch"],ia(r));const l=i(t,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],ra(l)),i(t,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],la());const c=i(t,["googleMaps"]);c!=null&&s(e,["googleMaps"],ca(c)),i(t,["urlContext"])!=null&&s(e,["urlContext"],fa());const u=i(t,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=i(t,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function da(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function pa(t){const e={},n=i(t,["latitude"]);n!=null&&s(e,["latitude"],n);const o=i(t,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function ma(t){const e={},n=i(t,["latLng"]);n!=null&&s(e,["latLng"],pa(n));const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ga(t){const e={},n=i(t,["functionCallingConfig"]);n!=null&&s(e,["functionCallingConfig"],da(n));const o=i(t,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],ma(o)),e}function ha(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function ya(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],ha(n)),e}function va(t){const e={},n=i(t,["voiceConfig"]);if(n!=null&&s(e,["voiceConfig"],ya(n)),i(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(t,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ta(t){const e={},n=i(t,["includeThoughts"]);n!=null&&s(e,["includeThoughts"],n);const o=i(t,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Ca(t,e,n){const o={},r=i(e,["systemInstruction"]);n!==void 0&&r!=null&&s(n,["systemInstruction"],j(L(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const c=i(e,["topK"]);c!=null&&s(o,["topK"],c);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const u=i(e,["maxOutputTokens"]);u!=null&&s(o,["maxOutputTokens"],u);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const v=i(e,["responseMimeType"]);v!=null&&s(o,["responseMimeType"],v);const E=i(e,["responseSchema"]);E!=null&&s(o,["responseSchema"],jl(we(E)));const C=i(e,["responseJsonSchema"]);C!=null&&s(o,["responseJsonSchema"],C);const S=i(e,["routingConfig"]);S!=null&&s(o,["routingConfig"],S);const A=i(e,["modelSelectionConfig"]);A!=null&&s(o,["modelConfig"],ea(A));const _=i(e,["safetySettings"]);if(n!==void 0&&_!=null){let $=_;Array.isArray($)&&($=$.map(me=>ta(me))),s(n,["safetySettings"],$)}const R=i(e,["tools"]);if(n!==void 0&&R!=null){let $=Z(R);Array.isArray($)&&($=$.map(me=>_n(Q(me)))),s(n,["tools"],$)}const P=i(e,["toolConfig"]);n!==void 0&&P!=null&&s(n,["toolConfig"],ga(P));const F=i(e,["labels"]);n!==void 0&&F!=null&&s(n,["labels"],F);const I=i(e,["cachedContent"]);n!==void 0&&I!=null&&s(n,["cachedContent"],q(t,I));const N=i(e,["responseModalities"]);N!=null&&s(o,["responseModalities"],N);const x=i(e,["mediaResolution"]);x!=null&&s(o,["mediaResolution"],x);const B=i(e,["speechConfig"]);B!=null&&s(o,["speechConfig"],va(Ne(B)));const Fe=i(e,["audioTimestamp"]);Fe!=null&&s(o,["audioTimestamp"],Fe);const Le=i(e,["thinkingConfig"]);return Le!=null&&s(o,["thinkingConfig"],Ta(Le)),o}function Jt(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(c=>j(c))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["generationConfig"],Ca(t,l,n)),n}function Sa(t,e){const n={},o=i(t,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(t,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(t,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(t,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const c=i(t,["autoTruncate"]);return e!==void 0&&c!=null&&s(e,["parameters","autoTruncate"],c),n}function Ea(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["contents"]);r!=null&&s(n,["instances[]","content"],sn(t,r));const l=i(e,["config"]);return l!=null&&s(n,["config"],Sa(l,n)),n}function _a(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(t,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const c=i(t,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(t,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const v=i(t,["addWatermark"]);e!==void 0&&v!=null&&s(e,["parameters","addWatermark"],v);const E=i(t,["imageSize"]);e!==void 0&&E!=null&&s(e,["parameters","sampleImageSize"],E);const C=i(t,["enhancePrompt"]);return e!==void 0&&C!=null&&s(e,["parameters","enhancePrompt"],C),n}function Aa(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(n,["config"],_a(l,n)),n}function pe(t){const e={},n=i(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const o=i(t,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],W(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ma(t){const e={},n=i(t,["maskMode"]);n!=null&&s(e,["maskMode"],n);const o=i(t,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(t,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function Ia(t){const e={},n=i(t,["controlType"]);n!=null&&s(e,["controlType"],n);const o=i(t,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function Ra(t){const e={},n=i(t,["styleDescription"]);return n!=null&&s(e,["styleDescription"],n),e}function Pa(t){const e={},n=i(t,["subjectType"]);n!=null&&s(e,["subjectType"],n);const o=i(t,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function xa(t){const e={},n=i(t,["referenceImage"]);n!=null&&s(e,["referenceImage"],pe(n));const o=i(t,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(t,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(t,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Ma(l));const a=i(t,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],Ia(a));const c=i(t,["styleImageConfig"]);c!=null&&s(e,["styleImageConfig"],Ra(c));const f=i(t,["subjectImageConfig"]);return f!=null&&s(e,["subjectImageConfig"],Pa(f)),e}function wa(t,e){const n={},o=i(t,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(t,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(t,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(t,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const c=i(t,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);const f=i(t,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const u=i(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(t,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(t,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(t,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const v=i(t,["addWatermark"]);e!==void 0&&v!=null&&s(e,["parameters","addWatermark"],v);const E=i(t,["editMode"]);e!==void 0&&E!=null&&s(e,["parameters","editMode"],E);const C=i(t,["baseSteps"]);return e!==void 0&&C!=null&&s(e,["parameters","editConfig","baseSteps"],C),n}function Na(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>xa(f))),s(n,["instances[0]","referenceImages"],c)}const a=i(e,["config"]);return a!=null&&s(n,["config"],wa(a,n)),n}function Da(t,e){const n={},o=i(t,["includeRaiReason"]);e!==void 0&&o!=null&&s(e,["parameters","includeRaiReason"],o);const r=i(t,["outputMimeType"]);e!==void 0&&r!=null&&s(e,["parameters","outputOptions","mimeType"],r);const l=i(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);const a=i(t,["enhanceInputImage"]);e!==void 0&&a!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],a);const c=i(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=i(t,["numberOfImages"]);e!==void 0&&f!=null&&s(e,["parameters","sampleCount"],f);const u=i(t,["mode"]);return e!==void 0&&u!=null&&s(e,["parameters","mode"],u),n}function ka(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["image"]);r!=null&&s(n,["instances[0]","image"],pe(r));const l=i(e,["upscaleFactor"]);l!=null&&s(n,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&s(n,["config"],Da(a,n)),n}function Ua(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function Fa(t,e,n){const o={},r=i(e,["pageSize"]);n!==void 0&&r!=null&&s(n,["_query","pageSize"],r);const l=i(e,["pageToken"]);n!==void 0&&l!=null&&s(n,["_query","pageToken"],l);const a=i(e,["filter"]);n!==void 0&&a!=null&&s(n,["_query","filter"],a);const c=i(e,["queryBase"]);return n!==void 0&&c!=null&&s(n,["_url","models_url"],an(t,c)),o}function La(t,e){const n={},o=i(e,["config"]);return o!=null&&s(n,["config"],Fa(t,o,n)),n}function Va(t,e){const n={},o=i(t,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),n}function Ga(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Va(r,n)),n}function Ba(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","name"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],r),n}function $a(t,e){const n={},o=i(t,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],j(L(o)));const r=i(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>_n(c))),s(e,["tools"],a)}const l=i(t,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),n}function qa(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(c=>j(c))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["config"],$a(l,n)),n}function Ha(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["contents"]);if(r!=null){let a=G(r);Array.isArray(a)&&(a=a.map(c=>j(c))),s(n,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(n,["config"],l),n}function Ja(t){const e={},n=i(t,["uri"]);n!=null&&s(e,["gcsUri"],n);const o=i(t,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],W(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ya(t,e){const n={},o=i(t,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(t,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(t,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(t,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const c=i(t,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const f=i(t,["aspectRatio"]);e!==void 0&&f!=null&&s(e,["parameters","aspectRatio"],f);const u=i(t,["resolution"]);e!==void 0&&u!=null&&s(e,["parameters","resolution"],u);const d=i(t,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(t,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(t,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=i(t,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const h=i(t,["generateAudio"]);e!==void 0&&h!=null&&s(e,["parameters","generateAudio"],h);const y=i(t,["lastFrame"]);e!==void 0&&y!=null&&s(e,["instances[0]","lastFrame"],pe(y));const v=i(t,["compressionQuality"]);return e!==void 0&&v!=null&&s(e,["parameters","compressionQuality"],v),n}function Wa(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["_url","model"],w(t,o));const r=i(e,["prompt"]);r!=null&&s(n,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(n,["instances[0]","image"],pe(l));const a=i(e,["video"]);a!=null&&s(n,["instances[0]","video"],Ja(a));const c=i(e,["config"]);return c!=null&&s(n,["config"],Ya(c,n)),n}function Ka(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ba(t){const e={},n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function za(t){const e={},n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Xa(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Ka(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],ba(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],za(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Qa(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Xa(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function Za(t){const e={},n=i(t,["citationSources"]);return n!=null&&s(e,["citations"],n),e}function Oa(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function ja(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Oa(r))),s(e,["urlMetadata"],o)}return e}function eu(t){const e={},n=i(t,["content"]);n!=null&&s(e,["content"],Qa(n));const o=i(t,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Za(o));const r=i(t,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],ja(a));const c=i(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);const f=i(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const u=i(t,["index"]);u!=null&&s(e,["index"],u);const d=i(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Yt(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>eu(f))),s(e,["candidates"],c)}const r=i(t,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(t,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(t,["usageMetadata"]);return a!=null&&s(e,["usageMetadata"],a),e}function tu(t){const e={},n=i(t,["values"]);return n!=null&&s(e,["values"],n),e}function nu(){return{}}function ou(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>tu(a))),s(e,["embeddings"],l)}return i(t,["metadata"])!=null&&s(e,["metadata"],nu()),e}function iu(t){const e={},n=i(t,["bytesBase64Encoded"]);n!=null&&s(e,["imageBytes"],W(n));const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function An(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(t,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function su(t){const e={},n=i(t,["_self"]);n!=null&&s(e,["image"],iu(n));const o=i(t,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(t,["_self"]);return r!=null&&s(e,["safetyAttributes"],An(r)),e}function ru(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>su(a))),s(e,["generatedImages"],l)}const r=i(t,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],An(r)),e}function lu(t){const e={},n=i(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(t,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Me(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["version"]);l!=null&&s(e,["version"],l);const a=i(t,["_self"]);a!=null&&s(e,["tunedModelInfo"],lu(a));const c=i(t,["inputTokenLimit"]);c!=null&&s(e,["inputTokenLimit"],c);const f=i(t,["outputTokenLimit"]);f!=null&&s(e,["outputTokenLimit"],f);const u=i(t,["supportedGenerationMethods"]);return u!=null&&s(e,["supportedActions"],u),e}function au(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["_self"]);if(r!=null){let l=un(r);Array.isArray(l)&&(l=l.map(a=>Me(a))),s(e,["models"],l)}return e}function uu(){return{}}function cu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(t,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function fu(t){const e={},n=i(t,["video","uri"]);n!=null&&s(e,["uri"],n);const o=i(t,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],W(o));const r=i(t,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function du(t){const e={},n=i(t,["_self"]);return n!=null&&s(e,["video"],fu(n)),e}function pu(t){const e={},n=i(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>du(a))),s(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function mu(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(t,["done"]);r!=null&&s(e,["done"],r);const l=i(t,["error"]);l!=null&&s(e,["error"],l);const a=i(t,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],pu(a)),e}function gu(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function hu(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["data"]);o!=null&&s(e,["data"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function yu(t){const e={},n=i(t,["displayName"]);n!=null&&s(e,["displayName"],n);const o=i(t,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function vu(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],gu(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],hu(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],yu(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function Tu(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>vu(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function Cu(t){const e={},n=i(t,["citations"]);return n!=null&&s(e,["citations"],n),e}function Su(t){const e={},n=i(t,["retrievedUrl"]);n!=null&&s(e,["retrievedUrl"],n);const o=i(t,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Eu(t){const e={},n=i(t,["urlMetadata"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Su(r))),s(e,["urlMetadata"],o)}return e}function _u(t){const e={},n=i(t,["content"]);n!=null&&s(e,["content"],Tu(n));const o=i(t,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Cu(o));const r=i(t,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=i(t,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(t,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Eu(a));const c=i(t,["avgLogprobs"]);c!=null&&s(e,["avgLogprobs"],c);const f=i(t,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const u=i(t,["index"]);u!=null&&s(e,["index"],u);const d=i(t,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(t,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Wt(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>_u(d))),s(e,["candidates"],u)}const r=i(t,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(t,["responseId"]);l!=null&&s(e,["responseId"],l);const a=i(t,["modelVersion"]);a!=null&&s(e,["modelVersion"],a);const c=i(t,["promptFeedback"]);c!=null&&s(e,["promptFeedback"],c);const f=i(t,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function Au(t){const e={},n=i(t,["truncated"]);n!=null&&s(e,["truncated"],n);const o=i(t,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function Mu(t){const e={},n=i(t,["values"]);n!=null&&s(e,["values"],n);const o=i(t,["statistics"]);return o!=null&&s(e,["statistics"],Au(o)),e}function Iu(t){const e={},n=i(t,["billableCharacterCount"]);return n!=null&&s(e,["billableCharacterCount"],n),e}function Ru(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Mu(a))),s(e,["embeddings"],l)}const r=i(t,["metadata"]);return r!=null&&s(e,["metadata"],Iu(r)),e}function Pu(t){const e={},n=i(t,["gcsUri"]);n!=null&&s(e,["gcsUri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],W(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Mn(t){const e={},n=i(t,["safetyAttributes","categories"]);n!=null&&s(e,["categories"],n);const o=i(t,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(t,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function ke(t){const e={},n=i(t,["_self"]);n!=null&&s(e,["image"],Pu(n));const o=i(t,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(t,["_self"]);r!=null&&s(e,["safetyAttributes"],Mn(r));const l=i(t,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function xu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ke(a))),s(e,["generatedImages"],l)}const r=i(t,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],Mn(r)),e}function wu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ke(l))),s(e,["generatedImages"],r)}return e}function Nu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ke(l))),s(e,["generatedImages"],r)}return e}function Du(t){const e={},n=i(t,["endpoint"]);n!=null&&s(e,["name"],n);const o=i(t,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function ku(t){const e={},n=i(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(t,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Uu(t){const e={},n=i(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(t,["step"]);return r!=null&&s(e,["step"],r),e}function Ie(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(t,["description"]);r!=null&&s(e,["description"],r);const l=i(t,["versionId"]);l!=null&&s(e,["version"],l);const a=i(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Du(m))),s(e,["endpoints"],p)}const c=i(t,["labels"]);c!=null&&s(e,["labels"],c);const f=i(t,["_self"]);f!=null&&s(e,["tunedModelInfo"],ku(f));const u=i(t,["defaultCheckpointId"]);u!=null&&s(e,["defaultCheckpointId"],u);const d=i(t,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Uu(m))),s(e,["checkpoints"],p)}return e}function Fu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["_self"]);if(r!=null){let l=un(r);Array.isArray(l)&&(l=l.map(a=>Ie(a))),s(e,["models"],l)}return e}function Lu(){return{}}function Vu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function Gu(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["tokensInfo"]);return o!=null&&s(e,["tokensInfo"],o),e}function Bu(t){const e={},n=i(t,["gcsUri"]);n!=null&&s(e,["uri"],n);const o=i(t,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],W(o));const r=i(t,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function $u(t){const e={},n=i(t,["_self"]);return n!=null&&s(e,["video"],Bu(n)),e}function qu(t){const e={},n=i(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>$u(a))),s(e,["generatedVideos"],l)}const o=i(t,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(t,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Hu(t){const e={},n=i(t,["name"]);n!=null&&s(e,["name"],n);const o=i(t,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(t,["done"]);r!=null&&s(e,["done"],r);const l=i(t,["error"]);l!=null&&s(e,["error"],l);const a=i(t,["response"]);return a!=null&&s(e,["response"],qu(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ju="Content-Type",Yu="X-Server-Timeout",Wu="User-Agent",Re="x-goog-api-client",Ku="1.12.0",bu=`google-genai-sdk/${Ku}`,zu="v1beta1",Xu="v1beta",Kt=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Qu{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:zu,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Xu,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[a,c]of Object.entries(e.queryParams))r.searchParams.append(a,String(c));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(n))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o){if(n&&n.timeout||o){const r=new AbortController,l=r.signal;if(n.timeout&&n?.timeout>0){const a=setTimeout(()=>r.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return n&&n.extraBody!==null&&Zu(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await bt(r),new Te(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await bt(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return z(this,arguments,function*(){const r=(n=e?.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:c,value:f}=yield D(r.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=l.decode(f,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,y=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<600)throw new fe({message:y,status:h})}}catch(p){if(p.name==="ApiError")throw p}a+=u;let d=a.match(Kt);for(;d;){const p=d[1];try{const m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield D(new Te(m)),a=a.slice(d[0].length),d=a.match(Kt)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=bu+" "+this.clientOptions.userAgentExtra;return e[Wu]=n,e[Re]=n,e[Ju]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))n.append(o,r);e.timeout&&e.timeout>0&&n.append(Yu,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const c=(o=n?.mimeType)!==null&&o!==void 0?o:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const f=await this.fetchUploadUrl(r,n);return l.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var o;let r={};n?.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:T("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(o=a?.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function bt(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new fe({message:r,status:n}):new Error(r)}}function Zu(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const c=Object.assign({},l);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const u=a[f],d=c[f];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?c[f]=o(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),c[f]=u)}return c}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ou="mcp_used/unknown";let ju=!1;function In(t){for(const e of t)if(ec(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ju}function Rn(t){var e;const n=(e=t[Re])!==null&&e!==void 0?e:"";t[Re]=(n+` ${Ou}`).trimStart()}function ec(t){return t!==null&&typeof t=="object"&&t instanceof Ue}function tc(t,e=100){return z(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield D(t.listTools({cursor:o}));for(const a of l.tools)yield yield D(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class Ue{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ue(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const d of this.mcpClients)try{for(var c=!0,f=(n=void 0,ne(tc(d))),u;u=await f.next(),e=u.done,!e;c=!0){r=u.value,c=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=d}}catch(p){n={error:p}}finally{try{!c&&!e&&(o=f.return)&&await o.call(f)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Xn(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);n.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function nc(t,e,n){const o=new qn;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data);const l=Qr(r);Object.assign(o,l),e(o)}class oc{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=rc(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${c}`;let u=()=>{};const d=new Promise(S=>{u=S}),p=e.callbacks,m=function(){u({})},g=this.apiClient,h={onopen:m,onmessage:S=>{nc(g,p.onmessage,S)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(S){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(S){}},y=this.webSocketFactory.create(f,sc(a),h);y.connect(),await d;const v=w(this.apiClient,e.model),E=Cn({model:v}),C=Ae({setup:E});return y.send(JSON.stringify(C)),new ic(y,this.apiClient)}}class ic{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=zs(e),o=Sn(n);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Xs(e),o=Ae(n);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const n=Ae({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(K.PLAY)}pause(){this.sendPlaybackControl(K.PAUSE)}stop(){this.sendPlaybackControl(K.STOP)}resetContext(){this.sendPlaybackControl(K.RESET_CONTEXT)}close(){this.conn.close()}}function sc(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function rc(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lc="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ac(t,e,n){const o=new $n;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const l=JSON.parse(r);if(t.isVertexAI()){const a=cl(l);Object.assign(o,a)}else{const a=qr(l);Object.assign(o,a)}e(o)}class uc{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new oc(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,l,a,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&In(e.config.tools)&&Rn(p);const m=pc(p);if(this.apiClient.isVertexAI())d=`${f}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const I=this.apiClient.getApiKey();let N="BidiGenerateContent",x="key";I?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",x="access_token"),d=`${f}/ws/google.ai.generativelanguage.${u}.GenerativeService.${N}?${x}=${I}`}let g=()=>{};const h=new Promise(I=>{g=I}),y=e.callbacks,v=function(){var I;(I=y?.onopen)===null||I===void 0||I.call(y),g({})},E=this.apiClient,C={onopen:v,onmessage:I=>{ac(E,y.onmessage,I)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(I){},onclose:(o=y?.onclose)!==null&&o!==void 0?o:function(I){}},S=this.webSocketFactory.create(d,dc(m),C);S.connect(),await h;let A=w(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const I=this.apiClient.getProject(),N=this.apiClient.getLocation();A=`projects/${I}/locations/${N}/`+A}let _={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ae.AUDIO]}:e.config.responseModalities=[ae.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(c=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[],P=[];for(const I of R)if(this.isCallableTool(I)){const N=I;P.push(await N.tool())}else P.push(I);P.length>0&&(e.config.tools=P);const F={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?_=Er(this.apiClient,F):_=Ys(this.apiClient,F),delete _.config,S.send(JSON.stringify(_)),new fc(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const cc={turnComplete:!0};class fc{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=G(n.turns),e.isVertexAI()?o=o.map(r=>j(r)):o=o.map(r=>de(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(lc)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},cc),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Mr(e)}:n={realtimeInput:bs(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function dc(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function pc(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zt=10;function Xt(t){var e,n,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t?.tools)!==null&&n!==void 0?n:[])if(X(a)){r=!0;break}if(!r)return!0;const l=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function X(t){return"callTool"in t&&typeof t.callTool=="function"}function mc(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>X(r)))!==null&&o!==void 0?o:!1}function gc(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!X(r)))!==null&&o!==void 0?o:!1}function Qt(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hc extends Y{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,l,a,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!mc(n)||Xt(n.config))return await this.generateContentInternal(f);if(gc(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const p=G(f.contents),m=(l=(r=(o=f.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:zt;let g=0;for(;g<m&&(u=await this.generateContentInternal(f),!(!u.functionCalls||u.functionCalls.length===0));){const h=u.candidates[0].content,y=[];for(const v of(c=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&c!==void 0?c:[])if(X(v)){const C=await v.callTool(u.functionCalls);y.push(...C)}g++,d={role:"user",parts:y},f.contents=G(f.contents),f.contents.push(h),f.contents.push(d),Qt(f.config)&&(p.push(h),p.push(d))}return Qt(f.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Xt(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let l;const a=[];if(o?.generatedImages)for(const f of o.generatedImages)f&&f?.safetyAttributes&&((r=f?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=f?.safetyAttributes:a.push(f);let c;return l?c={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:c={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},c}),this.list=async n=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new oe(J.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(a),a)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const a=await Promise.all(l.map(async f=>X(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(c.config.tools=a,e.config&&e.config.tools&&In(e.config.tools)){const f=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},f);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Rn(u),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return c}async initAfcToolsMap(e){var n,o,r;const l=new Map;for(const a of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(X(a)){const c=a,f=await c.tool();for(const u of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(l.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);l.set(u.name,c)}}return l}async processAfcStream(e){var n,o,r;const l=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:zt;let a=!1,c=0;const f=await this.initAfcToolsMap(e);return function(u,d,p){var m,g;return z(this,arguments,function*(){for(var h,y,v,E;c<l;){a&&(c++,a=!1);const _=yield D(u.processParamsMaybeAddMcpUsage(p)),R=yield D(u.generateContentStreamInternal(_)),P=[],F=[];try{for(var C=!0,S=(y=void 0,ne(R)),A;A=yield D(S.next()),h=A.done,!h;C=!0){E=A.value,C=!1;const I=E;if(yield yield D(I),I.candidates&&(!((m=I.candidates[0])===null||m===void 0)&&m.content)){F.push(I.candidates[0].content);for(const N of(g=I.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(c<l&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){const x=yield D(d.get(N.functionCall.name).callTool([N.functionCall]));P.push(...x)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(I){y={error:I}}finally{try{!C&&!h&&(v=S.return)&&(yield D(v.call(S)))}finally{if(y)throw y.error}}if(P.length>0){a=!0;const I=new te;I.candidates=[{content:{role:"user",parts:P}}],yield yield D(I);const N=[];N.push(...F),N.push({role:"user",parts:P});const x=G(p.contents).concat(N);p.contents=x}else break}})}(this,f,e)}async generateContentInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Jt(this.apiClient,e);return c=T("{model}:generateContent",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Wt(d),m=new te;return Object.assign(m,p),m})}else{const u=Ht(this.apiClient,e);return c=T("{model}:generateContent",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Yt(d),m=new te;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Jt(this.apiClient,e);return c=T("{model}:streamGenerateContent?alt=sse",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return z(this,arguments,function*(){var m,g,h,y;try{for(var v=!0,E=ne(p),C;C=yield D(E.next()),m=C.done,!m;v=!0){y=C.value,v=!1;const S=y,A=Wt(yield D(S.json()));A.sdkHttpResponse={headers:S.headers};const _=new te;Object.assign(_,A),yield yield D(_)}}catch(S){g={error:S}}finally{try{!v&&!m&&(h=E.return)&&(yield D(h.call(E)))}finally{if(g)throw g.error}}})})}else{const u=Ht(this.apiClient,e);return c=T("{model}:streamGenerateContent?alt=sse",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return z(this,arguments,function*(){var m,g,h,y;try{for(var v=!0,E=ne(p),C;C=yield D(E.next()),m=C.done,!m;v=!0){y=C.value,v=!1;const S=y,A=Yt(yield D(S.json()));A.sdkHttpResponse={headers:S.headers};const _=new te;Object.assign(_,A),yield yield D(_)}}catch(S){g={error:S}}finally{try{!v&&!m&&(h=E.return)&&(yield D(h.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Ea(this.apiClient,e);return c=T("{model}:predict",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Ru(d),m=new St;return Object.assign(m,p),m})}else{const u=Fl(this.apiClient,e);return c=T("{model}:batchEmbedContents",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ou(d),m=new St;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Aa(this.apiClient,e);return c=T("{model}:predict",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=xu(d),m=new Et;return Object.assign(m,p),m})}else{const u=Vl(this.apiClient,e);return c=T("{model}:predict",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ru(d),m=new Et;return Object.assign(m,p),m})}}async editImageInternal(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const c=Na(this.apiClient,e);return l=T("{model}:predict",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const u=wu(f),d=new Un;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const c=ka(this.apiClient,e);return l=T("{model}:predict",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const u=Nu(f),d=new Fn;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Ua(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ie(d))}else{const u=Gl(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Me(d))}}async listInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=La(this.apiClient,e);return c=T("{models_url}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Fu(d),m=new _t;return Object.assign(m,p),m})}else{const u=$l(this.apiClient,e);return c=T("{models_url}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=au(d),m=new _t;return Object.assign(m,p),m})}}async update(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Ga(this.apiClient,e);return c=T("{model}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ie(d))}else{const u=Hl(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Me(d))}}async delete(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Ba(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Lu(),p=new At;return Object.assign(p,d),p})}else{const u=Jl(this.apiClient,e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=uu(),p=new At;return Object.assign(p,d),p})}}async countTokens(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=qa(this.apiClient,e);return c=T("{model}:countTokens",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Vu(d),m=new Mt;return Object.assign(m,p),m})}else{const u=Wl(this.apiClient,e);return c=T("{model}:countTokens",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=cu(d),m=new Mt;return Object.assign(m,p),m})}}async computeTokens(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const c=Ha(this.apiClient,e);return l=T("{model}:computeTokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>{const u=Gu(f),d=new Ln;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=Wa(this.apiClient,e);return c=T("{model}:predictLongRunning",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Hu(d),m=new ue;return Object.assign(m,p),m})}else{const u=zl(this.apiClient,e);return c=T("{model}:predictLongRunning",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=mu(d),m=new ue;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yc(t){const e={},n=i(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function vc(t){const e={},n=i(t,["operationName"]);n!=null&&s(e,["_url","operationName"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function Tc(t){const e={},n=i(t,["operationName"]);n!=null&&s(e,["operationName"],n);const o=i(t,["resourceName"]);o!=null&&s(e,["_url","resourceName"],o);const r=i(t,["config"]);return r!=null&&s(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cc extends Y{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=vc(e);return c=T("{operationName}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a}else{const u=yc(e);return c=T("{operationName}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a}}async fetchPredictVideosOperationInternal(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const c=Tc(e);return l=T("{resourceName}:fetchPredictOperation",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sc(t){const e={},n=i(t,["voiceName"]);return n!=null&&s(e,["voiceName"],n),e}function Pn(t){const e={},n=i(t,["prebuiltVoiceConfig"]);return n!=null&&s(e,["prebuiltVoiceConfig"],Sc(n)),e}function Ec(t){const e={},n=i(t,["speaker"]);n!=null&&s(e,["speaker"],n);const o=i(t,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Pn(o)),e}function _c(t){const e={},n=i(t,["speakerVoiceConfigs"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>Ec(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Ac(t){const e={},n=i(t,["voiceConfig"]);n!=null&&s(e,["voiceConfig"],Pn(n));const o=i(t,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],_c(o));const r=i(t,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Mc(t){const e={},n=i(t,["fps"]);n!=null&&s(e,["fps"],n);const o=i(t,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(t,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ic(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["data"]);n!=null&&s(e,["data"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Rc(t){const e={};if(i(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=i(t,["fileUri"]);n!=null&&s(e,["fileUri"],n);const o=i(t,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Pc(t){const e={},n=i(t,["videoMetadata"]);n!=null&&s(e,["videoMetadata"],Mc(n));const o=i(t,["thought"]);o!=null&&s(e,["thought"],o);const r=i(t,["inlineData"]);r!=null&&s(e,["inlineData"],Ic(r));const l=i(t,["fileData"]);l!=null&&s(e,["fileData"],Rc(l));const a=i(t,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const c=i(t,["codeExecutionResult"]);c!=null&&s(e,["codeExecutionResult"],c);const f=i(t,["executableCode"]);f!=null&&s(e,["executableCode"],f);const u=i(t,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(t,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(t,["text"]);return p!=null&&s(e,["text"],p),e}function xc(t){const e={},n=i(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(l=>Pc(l))),s(e,["parts"],r)}const o=i(t,["role"]);return o!=null&&s(e,["role"],o),e}function wc(t){const e={},n=i(t,["behavior"]);n!=null&&s(e,["behavior"],n);const o=i(t,["description"]);o!=null&&s(e,["description"],o);const r=i(t,["name"]);r!=null&&s(e,["name"],r);const l=i(t,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(t,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const c=i(t,["response"]);c!=null&&s(e,["response"],c);const f=i(t,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Nc(t){const e={},n=i(t,["startTime"]);n!=null&&s(e,["startTime"],n);const o=i(t,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Dc(t){const e={},n=i(t,["timeRangeFilter"]);return n!=null&&s(e,["timeRangeFilter"],Nc(n)),e}function kc(t){const e={},n=i(t,["mode"]);n!=null&&s(e,["mode"],n);const o=i(t,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Uc(t){const e={},n=i(t,["dynamicRetrievalConfig"]);return n!=null&&s(e,["dynamicRetrievalConfig"],kc(n)),e}function Fc(){return{}}function Lc(t){const e={},n=i(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(u=>wc(u))),s(e,["functionDeclarations"],f)}if(i(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(t,["googleSearch"]);o!=null&&s(e,["googleSearch"],Dc(o));const r=i(t,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Uc(r)),i(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(t,["urlContext"])!=null&&s(e,["urlContext"],Fc());const a=i(t,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const c=i(t,["computerUse"]);return c!=null&&s(e,["computerUse"],c),e}function Vc(t){const e={},n=i(t,["handle"]);if(n!=null&&s(e,["handle"],n),i(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Zt(){return{}}function Gc(t){const e={},n=i(t,["disabled"]);n!=null&&s(e,["disabled"],n);const o=i(t,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(t,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(t,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(t,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Bc(t){const e={},n=i(t,["automaticActivityDetection"]);n!=null&&s(e,["automaticActivityDetection"],Gc(n));const o=i(t,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(t,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function $c(t){const e={},n=i(t,["targetTokens"]);return n!=null&&s(e,["targetTokens"],n),e}function qc(t){const e={},n=i(t,["triggerTokens"]);n!=null&&s(e,["triggerTokens"],n);const o=i(t,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],$c(o)),e}function Hc(t){const e={},n=i(t,["proactiveAudio"]);return n!=null&&s(e,["proactiveAudio"],n),e}function Jc(t,e){const n={},o=i(t,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(t,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(t,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(t,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const c=i(t,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);const f=i(t,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const u=i(t,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=i(t,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(t,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Ac(De(p)));const m=i(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(t,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],xc(L(g)));const h=i(t,["tools"]);if(e!==void 0&&h!=null){let _=Z(h);Array.isArray(_)&&(_=_.map(R=>Lc(Q(R)))),s(e,["setup","tools"],_)}const y=i(t,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Vc(y));const v=i(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&s(e,["setup","inputAudioTranscription"],Zt());const E=i(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],Zt());const C=i(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&s(e,["setup","realtimeInputConfig"],Bc(C));const S=i(t,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],qc(S));const A=i(t,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Hc(A)),n}function Yc(t,e){const n={},o=i(e,["model"]);o!=null&&s(n,["setup","model"],w(t,o));const r=i(e,["config"]);return r!=null&&s(n,["config"],Jc(r,n)),n}function Wc(t,e,n){const o={},r=i(e,["expireTime"]);n!==void 0&&r!=null&&s(n,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&s(n,["newSessionExpireTime"],l);const a=i(e,["uses"]);n!==void 0&&a!=null&&s(n,["uses"],a);const c=i(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&s(n,["bidiGenerateContentSetup"],Yc(t,c));const f=i(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&s(n,["fieldMask"],f),o}function Kc(t,e){const n={},o=i(e,["config"]);return o!=null&&s(n,["config"],Wc(t,o,n)),n}function bc(t){const e={},n=i(t,["name"]);return n!=null&&s(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zc(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${n}.${l}`);e.push(...r)}else e.push(n)}return e.join(",")}function Xc(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const l=zc(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(u=>a.includes(u)?`generationConfig.${u}`:u));const f=[];l&&f.push(l),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Qc extends Y{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=Kc(this.apiClient,e);l=T("auth_tokens",c._url),a=c._query,delete c.config,delete c._url,delete c._query;const f=Xc(c,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>bc(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zc(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function Oc(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function jc(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],Oc(n,e)),e}function ef(t){const e={},n=i(t,["textInput"]);n!=null&&s(e,["textInput"],n);const o=i(t,["output"]);return o!=null&&s(e,["output"],o),e}function tf(t){const e={};if(i(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=i(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>ef(r))),s(e,["examples","examples"],o)}return e}function nf(t,e){const n={};if(i(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),i(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(t,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(t,["learningRateMultiplier"]);if(l!=null&&s(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(t,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const c=i(t,["learningRate"]);return e!==void 0&&c!=null&&s(e,["tuningTask","hyperparameters","learningRate"],c),n}function of(t){const e={},n=i(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&s(e,["tuningTask","trainingData"],tf(o));const r=i(t,["config"]);return r!=null&&s(e,["config"],nf(r,e)),e}function sf(t){const e={},n=i(t,["name"]);n!=null&&s(e,["_url","name"],n);const o=i(t,["config"]);return o!=null&&s(e,["config"],o),e}function rf(t,e){const n={},o=i(t,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(t,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(t,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),n}function lf(t){const e={},n=i(t,["config"]);return n!=null&&s(e,["config"],rf(n,e)),e}function af(t,e){const n={},o=i(t,["gcsUri"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o);const r=i(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),i(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function uf(t,e){const n={},o=i(t,["gcsUri"]);o!=null&&s(n,["validationDatasetUri"],o);const r=i(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}function cf(t,e){const n={},o=i(t,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],uf(o,n));const r=i(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=i(t,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=i(t,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const c=i(t,["learningRateMultiplier"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const f=i(t,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const u=i(t,["adapterSize"]);if(e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),i(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function ff(t){const e={},n=i(t,["baseModel"]);n!=null&&s(e,["baseModel"],n);const o=i(t,["trainingDataset"]);o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],af(o,e));const r=i(t,["config"]);return r!=null&&s(e,["config"],cf(r,e)),e}function df(t){const e={},n=i(t,["name"]);n!=null&&s(e,["model"],n);const o=i(t,["name"]);return o!=null&&s(e,["endpoint"],o),e}function xn(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["state"]);r!=null&&s(e,["state"],rn(r));const l=i(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(t,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const c=i(t,["tuningTask","completeTime"]);c!=null&&s(e,["endTime"],c);const f=i(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);const u=i(t,["description"]);u!=null&&s(e,["description"],u);const d=i(t,["baseModel"]);d!=null&&s(e,["baseModel"],d);const p=i(t,["_self"]);p!=null&&s(e,["tunedModel"],df(p));const m=i(t,["distillationSpec"]);m!=null&&s(e,["distillationSpec"],m);const g=i(t,["experiment"]);g!=null&&s(e,["experiment"],g);const h=i(t,["labels"]);h!=null&&s(e,["labels"],h);const y=i(t,["pipelineJob"]);y!=null&&s(e,["pipelineJob"],y);const v=i(t,["satisfiesPzi"]);v!=null&&s(e,["satisfiesPzi"],v);const E=i(t,["satisfiesPzs"]);E!=null&&s(e,["satisfiesPzs"],E);const C=i(t,["serviceAccount"]);C!=null&&s(e,["serviceAccount"],C);const S=i(t,["tunedModelDisplayName"]);return S!=null&&s(e,["tunedModelDisplayName"],S),e}function pf(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>xn(a))),s(e,["tuningJobs"],l)}return e}function mf(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(t,["done"]);l!=null&&s(e,["done"],l);const a=i(t,["error"]);return a!=null&&s(e,["error"],a),e}function gf(t){const e={},n=i(t,["checkpointId"]);n!=null&&s(e,["checkpointId"],n);const o=i(t,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(t,["step"]);r!=null&&s(e,["step"],r);const l=i(t,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function hf(t){const e={},n=i(t,["model"]);n!=null&&s(e,["model"],n);const o=i(t,["endpoint"]);o!=null&&s(e,["endpoint"],o);const r=i(t,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>gf(a))),s(e,["checkpoints"],l)}return e}function Pe(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["name"]);o!=null&&s(e,["name"],o);const r=i(t,["state"]);r!=null&&s(e,["state"],rn(r));const l=i(t,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(t,["startTime"]);a!=null&&s(e,["startTime"],a);const c=i(t,["endTime"]);c!=null&&s(e,["endTime"],c);const f=i(t,["updateTime"]);f!=null&&s(e,["updateTime"],f);const u=i(t,["error"]);u!=null&&s(e,["error"],u);const d=i(t,["description"]);d!=null&&s(e,["description"],d);const p=i(t,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=i(t,["tunedModel"]);m!=null&&s(e,["tunedModel"],hf(m));const g=i(t,["supervisedTuningSpec"]);g!=null&&s(e,["supervisedTuningSpec"],g);const h=i(t,["tuningDataStats"]);h!=null&&s(e,["tuningDataStats"],h);const y=i(t,["encryptionSpec"]);y!=null&&s(e,["encryptionSpec"],y);const v=i(t,["partnerModelTuningSpec"]);v!=null&&s(e,["partnerModelTuningSpec"],v);const E=i(t,["distillationSpec"]);E!=null&&s(e,["distillationSpec"],E);const C=i(t,["experiment"]);C!=null&&s(e,["experiment"],C);const S=i(t,["labels"]);S!=null&&s(e,["labels"],S);const A=i(t,["pipelineJob"]);A!=null&&s(e,["pipelineJob"],A);const _=i(t,["satisfiesPzi"]);_!=null&&s(e,["satisfiesPzi"],_);const R=i(t,["satisfiesPzs"]);R!=null&&s(e,["satisfiesPzs"],R);const P=i(t,["serviceAccount"]);P!=null&&s(e,["serviceAccount"],P);const F=i(t,["tunedModelDisplayName"]);return F!=null&&s(e,["tunedModelDisplayName"],F),e}function yf(t){const e={},n=i(t,["sdkHttpResponse"]);n!=null&&s(e,["sdkHttpResponse"],n);const o=i(t,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(t,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Pe(a))),s(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vf extends Y{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new oe(J.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(n);{const o=await this.tuneMldevInternal(n);let r="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?r=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(r=o.name.split("/operations/")[0]),{name:r,state:ve.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=sf(e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Pe(d))}else{const u=Zc(e);return c=T("{name}",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>xn(d))}}async listInternal(e){var n,o,r,l;let a,c="",f={};if(this.apiClient.isVertexAI()){const u=lf(e);return c=T("tuningJobs",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=yf(d),m=new Rt;return Object.assign(m,p),m})}else{const u=jc(e);return c=T("tunedModels",u._url),f=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=pf(d),m=new Rt;return Object.assign(m,p),m})}}async tuneInternal(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const c=ff(e);return l=T("tuningJobs",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>Pe(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=of(e);return l=T("tunedModels",c._url),a=c._query,delete c.config,delete c._url,delete c._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:f.headers},d})),r.then(f=>mf(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tf{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Cf=1024*1024*8,Sf=3,Ef=1e3,_f=2,ge="x-goog-upload-status";async function Af(t,e,n){var o,r,l;let a=0,c=0,f=new Te(new Response),u="upload";for(a=t.size;c<a;){const p=Math.min(Cf,a-c),m=t.slice(c,c+p);c+p>=a&&(u+=", finalize");let g=0,h=Ef;for(;g<Sf&&(f=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((o=f?.headers)===null||o===void 0)&&o[ge]));)g++,await If(h),h=h*_f;if(c+=p,((r=f?.headers)===null||r===void 0?void 0:r[ge])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await f?.json();if(((l=f?.headers)===null||l===void 0?void 0:l[ge])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Mf(t){return{size:t.size,type:t.type}}function If(t){return new Promise(e=>setTimeout(e,t))}class Rf{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Af(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mf(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pf{create(e,n,o){return new xf(e,n,o)}}class xf{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ot="x-goog-api-key";class wf{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Ot)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ot,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nf="gl-node/";class Df{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=kn(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new wf(this.apiKey);this.apiClient=new Qu({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Nf+"web",uploader:new Rf,downloader:new Tf}),this.models=new hc(this.apiClient),this.live=new uc(this.apiClient,r,new Pf),this.batches=new oi(this.apiClient),this.chats=new ls(this.models,this.apiClient),this.caches=new is(this.apiClient),this.files=new Cs(this.apiClient),this.operations=new Cc(this.apiClient),this.authTokens=new Qc(this.apiClient),this.tunings=new vf(this.apiClient)}}var he={};const kf=()=>he.API_KEY||he.GEMINI_API_KEY||he.VITE_GEMINI_API_KEY||null,xe=kf(),ee=!!xe,U=ee&&xe?new Df({apiKey:xe}):null;ee||console.warn("🔑 Gemini API key not configured. Add VITE_GEMINI_API_KEY to your .env file to enable real AI features. Using mock responses for development.");const Uf="You are The Oracle, a hyper-intelligent and slightly mysterious fantasy football expert. You provide concise, insightful, and strategic advice to help users win their fantasy draft. You have access to the current state of the draft, including the user's current roster and the best players still available. When asked for advice, analyze the user's team composition and positional needs against the available talent pool. Your responses should be direct, actionable, and in a conversational, expert tone. You can use markdown for formatting like lists or bolding.",M=(t,e=800)=>new Promise(n=>setTimeout(()=>n(t),e+Math.random()*500)),V=t=>t[Math.floor(Math.random()*t.length)],Ff=["This team is clicking on all cylinders, with their stars performing up to expectations.","A surprising upset victory has shot this team up the rankings.","Despite a loss, their underlying metrics suggest they are better than their record.","Injuries are starting to take a toll, causing a slide this week.","Inconsistent performances from key players make this team hard to trust.","A bold waiver wire pickup paid off big, leading to a dominant win."],Gf=async(t,e,n,o)=>{if(!ee||!U)return async function*(){yield{text:"The Oracle senses your need for guidance, but the cosmic connection is not fully established. Please configure your Gemini API key to unlock the Oracle's full wisdom."}}();const r=n?.roster.map(p=>`${p.name} (${p.position})`).join(", ")||"no players yet",l=n?`My current roster consists of: ${r}.`:"I haven't drafted any players yet.",c=`The top available players are: ${o.slice(0,20).map(p=>`${p.name} (${p.position}, Rank: ${p.rank})`).join(", ")}.`,f=`Here is the current draft context (use this for your response):
- ${l}
- ${c}`,u=t.map(p=>({role:p.sender==="user"?"user":"model",parts:[{text:p.text}]}));return u.push({role:"user",parts:[{text:`${f}

My question is: "${e}"`}]}),await U.models.generateContentStream({model:"gemini-2.5-flash",contents:u,config:{systemInstruction:Uf,tools:[{googleSearch:{}}]}})},Lf=t=>{switch(t){case"Tom Brady":return"You are Tom Brady. You value veteran leadership, high football IQ, and reliable pass-catchers. You prioritize protecting the quarterback and favor smart, disciplined players over pure athleticism. You have a chip on your shoulder and love finding underrated gems.";case"Bill Belichick":return"You are Bill Belichick. You are a cold, calculating strategist. You focus on value and versatility. You are known for trading down to acquire more picks and drafting players that fit your specific system, often surprising the experts. You avoid media hype and trust your own scouting.";case"Jerry Jones":return"You are Jerry Jones. You are a showman who loves making a splash. You draft superstars and offensive firepower, especially from big-name college programs. You are not afraid to take risks on high-profile players, even with off-field concerns. You want to win, but you also want to make headlines.";case"The Analyst":return"You are The Analyst. You make decisions based purely on data, projections, and value. You target players who consistently outperform their ADP and avoid risky prospects.";case"The Gambler":return"You are The Gambler. You love high-risk, high-reward players. You'll reach for a rookie with massive upside or a player returning from injury, hoping to hit a home run.";default:return`My manager persona is "${t}". Draft accordingly, embracing that style.`}},Bf=async(t,e)=>{if(!ee||!U){const f=["QB","RB","WR","TE"],u=t.roster.map(m=>m.position),d=f.find(m=>!u.includes(m))||"RB";return e.filter(m=>m.position===d).sort((m,g)=>m.rank-g.rank)[0]?.name||e[0]?.name||null}const o=`My current roster is: ${t.roster.map(f=>`${f.name} (${f.position})`).join(", ")||"empty"}.`,r=`The top available players are: ${e.slice(0,30).map(f=>f.name).join(", ")}.`,l=t.owner.persona?Lf(t.owner.persona):"",a=`
        Draft Context:
        - ${o}
        - ${r}
        
        Task: Based on the context, which single player from the list of available players should I draft?
    `,c={type:k.OBJECT,properties:{playerName:{type:k.STRING,description:"The full name of the player to draft."}},required:["playerName"]};try{const u=(await U.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{systemInstruction:`You are an expert fantasy football AI General Manager. Your goal is to build the best possible team. Analyze the roster composition and available players to make the optimal pick. You must choose one player from the provided list of available players. ${l}`,responseMimeType:"application/json",responseSchema:c}}))?.text?.trim();return u&&JSON.parse(u).playerName||null}catch(f){return console.error("Error getting AI draft pick from Gemini:",f),null}},$f=async t=>{if(!ee||!U){const n=[`${t.name} is a solid ${t.position} option with reliable production potential.`,`Consider ${t.name}'s matchup schedule and injury history when evaluating for your roster.`,`${t.name} has shown consistent performance and could be a valuable addition to your lineup.`,`Monitor ${t.name}'s target share and usage trends for optimal deployment in your fantasy lineup.`];return n[Math.floor(Math.random()*n.length)]}const e=`
        You are The Oracle, a fantasy football expert. Provide a concise, insightful analysis for the following player, suitable for a user's private notes.
        Focus on their fantasy outlook for the upcoming season, including potential risks and upside. Keep it to 2-3 short paragraphs.
        
        Player Details:
        - Name: ${t.name}
        - Position: ${t.position}
        - Team: ${t.team}
        - Rank: ${t.rank}
        - Bio: ${t.bio||"No bio available."}
    `;try{return(await U.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:"You provide expert, concise fantasy football analysis in a slightly mysterious and wise tone. Format your response as plain text suitable for a notes field."}}))?.text?.trim()||"The cosmos are cloudy... I cannot gather insight at this moment."}catch(n){return console.error("Error generating player insight from Gemini:",n),"The cosmos are cloudy... I cannot gather insight at this moment."}},qf=async t=>{if(!U)return null;const e=`Generate a single, creative, and cool nickname for the fantasy football player ${t.name} (${t.position}, ${t.team}). The nickname should be short and memorable. Only return the nickname itself, without any quotation marks or extra text.`;try{return(await U.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:"You are a creative writer specializing in epic sports nicknames. Provide only the nickname, nothing else.",temperature:.8}}))?.text?.trim().replace(/"/g,"")||null}catch(n){return console.error("Error generating player nickname:",n),null}},Hf=async(t,e)=>{const o=`My current roster is: ${t.roster.map(u=>`${u.name} (${u.position})`).join(", ")||"empty"}. My budget is $${t.budget}.`,l=`The top available players are: ${e.slice(0,50).map(u=>`${u.name} ($${u.auctionValue})`).join(", ")}.`,a=t.owner.persona?`My manager persona is "${t.owner.persona}". Nominate accordingly, embracing that style (e.g., a Gambler might nominate a high-risk rookie, an Enforcer might nominate an expensive player to drain budgets).`:"",c=`
        Auction Draft Context:
        - ${o}
        - ${l}
        - ${a}
        
        Task: I need to nominate one player to be auctioned. I can nominate a player I want, or nominate an expensive player to drain other teams' budgets. Which single player from the list should I nominate, keeping my persona in mind?
    `,f={type:k.OBJECT,properties:{playerName:{type:k.STRING,description:"The full name of the player to nominate."}},required:["playerName"]};try{if(!U)return null;const d=(await U.models.generateContent({model:"gemini-2.5-flash",contents:c,config:{systemInstruction:"You are an expert fantasy football AI General Manager in an auction draft. Your goal is to make strategic nominations based on your assigned persona.",responseMimeType:"application/json",responseSchema:f}}))?.text?.trim();return d&&JSON.parse(d).playerName||null}catch(u){return console.error("Error getting AI nomination from Gemini:",u),null}},Jf=async(t,e,n)=>{if(t.budget<=n)return null;const r=`My current roster is: ${t.roster.map(f=>`${f.name} (${f.position})`).join(", ")||"empty"}. My budget is $${t.budget}.`,l=t.owner.persona?`My manager persona is "${t.owner.persona}". Bid accordingly (e.g., a Gambler might overpay for upside, an Analyst will stick to value, an Enforcer will bid up players to drain budgets).`:"",a=`
        Auction Draft Context:
        - Player being auctioned: ${e.name} (${e.position}), Estimated Value: $${e.auctionValue}.
        - Current Bid: $${n}.
        - ${r}
        - ${l}
        
        Task: Should I place a bid? The new bid must be at least $${n+1}. My maximum possible bid is $${t.budget}.
        Based on the player's value, my budget, my roster needs, and my persona, decide on a new bid amount. If I should not bid, return null for the new bid.
    `,c={type:k.OBJECT,properties:{newBid:{type:k.INTEGER,description:"The new bid amount, or null if I should not bid."}}};try{if(!U)return null;const u=(await U.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{systemInstruction:"You are an expert fantasy football AI General Manager in an auction draft. Your goal is to make strategic bids. Return a single integer for your new bid, or null if you should not bid.",responseMimeType:"application/json",responseSchema:c}}))?.text?.trim();if(!u)return null;const d=JSON.parse(u);return d.newBid&&d.newBid>n&&d.newBid<=t.budget?d.newBid:null}catch(f){return console.error("Error getting AI bid from Gemini:",f),null}},Yf=async t=>{if(!U)return null;const e=`Generate a creative, cool fantasy football team name and a single emoji avatar for a manager named ${t}.`,n={type:k.OBJECT,properties:{teamName:{type:k.STRING,description:"A creative and cool fantasy football team name."},avatar:{type:k.STRING,description:"A single emoji that represents the team name or theme."}},required:["teamName","avatar"]};try{const r=(await U.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{systemInstruction:"You are a creative branding expert for fantasy sports.",responseMimeType:"application/json",responseSchema:n}}))?.text?.trim();return r?JSON.parse(r):null}catch(o){return console.error("Error generating team branding:",o),null}},Wf=async t=>{if(!U)return null;const e=["The Analyst","The Gambler","The Trash Talker","The Cagey Veteran","The Homer","The Enforcer","Tom Brady","Bill Belichick","Jerry Jones"],n=`Create an AI fantasy football manager profile for a league named "${t}". Provide a creative team name, a single emoji avatar, and select one persona from this list: ${e.join(", ")}.`,o={type:k.OBJECT,properties:{name:{type:k.STRING,description:"A creative and interesting team name for an AI manager."},avatar:{type:k.STRING,description:"A single emoji that represents the AI's team name or persona."},persona:{type:k.STRING,description:`One of the following personas: ${e.join(", ")}.`}},required:["name","avatar","persona"]};try{const l=(await U.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{systemInstruction:"You are a creative writer, tasked with creating diverse and interesting AI personalities for a fantasy football league.",responseMimeType:"application/json",responseSchema:o}}))?.text?.trim();if(!l)return null;const a=JSON.parse(l);return e.includes(a.persona)?a:null}catch(r){return console.error("Error generating AI team profile:",r),{name:`AI Team ${Math.floor(Math.random()*100)}`,avatar:"🤖",persona:e[Math.floor(Math.random()*e.length)]}}},Kf=async(t,e,n)=>{if(!ee||!U)return async function*(){yield{text:"Astral is currently offline. Please configure your Gemini API key to enable the assistant."}}();const o=`
        You are Astral, a hyper-intelligent and witty fantasy football assistant.
        The user you are helping is named ${n.name}.
        They are in the following leagues:
        ${e.map(l=>`- ${l.name} (ID: ${l.id}, Status: ${l.status}, My Team: ${l.teams.find(a=>a.owner.id===n.id)?.name})`).join(`
`)}
        
        Use this information to provide personalized and insightful answers to the user's questions. Be conversational and helpful. Use markdown for formatting.
        The user's question is: "${t}"
    `;return await U.models.generateContentStream({model:"gemini-2.5-flash",contents:o,config:{tools:[{googleSearch:{}}]}})},bf=async(t,e)=>{const n=[`Is ${e.name} even trying this week? My grandma could set a better lineup.`,`Hope you're ready for a long Sunday, because ${t.name} is about to put on a clinic.`,"I've seen more competitive teams in a peewee league. Good luck, you'll need it."];return M(V(n))},zf=async(t,e,n,o,r,l)=>{const a=n.reduce((d,p)=>d+(300-p.rank),0),c=o.reduce((d,p)=>d+(300-p.rank),0);let f;a>c?f="TEAM_A":c>a?f="TEAM_B":f="EVEN";let u;return f==="EVEN"?u="This trade seems quite balanced, addressing needs for both sides.":u=`This deal appears to favor ${f==="TEAM_A"?t:e}, who gets a slight edge in overall player value.`,M({summary:u,winner:f})},Xf=async(t,e,n)=>{const o=t.stats.weeklyProjections[n.currentWeek]||0,r=e.stats.weeklyProjections[n.currentWeek]||0,l=o>r?t.id:e.id,a=o>r?t:e,c=o>r?e:t,f=`While it's a close call, ${a.name} has a slightly better matchup this week and is projected for more volume, making him the safer start over ${c.name}.`;return M({recommendedPlayerId:l,summary:f})},Qf=async t=>M(`Fear the ${t.name}!`),Zf=async t=>{const e=t.teams,n=t.draftPicks.filter(a=>a.playerId).sort((a,c)=>{const f=H.find(d=>d.id===a.playerId),u=H.find(d=>d.id===c.playerId);return!f||!u?0:u.rank-c.overall-(f.rank-a.overall)})[0];if(!n)return null;const o=e.find(a=>a.id===n.teamId),r=H.find(a=>a.id===n.playerId);if(!o||!r)return null;const l={title:`The ${new Date().getFullYear()} ${t.name} Draft Recap`,summary:"An unforgettable draft filled with shocking picks, savvy moves, and a few head-scratchers. The balance of power has shifted, setting the stage for an epic season.",awards:[{awardTitle:"Draft Steal of the Year",teamName:o.name,playerName:r.name,rationale:`Getting ${r.name} at pick ${n.overall} was an absolute masterstroke, providing incredible value.`},{awardTitle:"The High-Risk, High-Reward Gambler",teamName:V(e).name,playerName:V(H.filter(a=>a.tier>4&&a.rank<100)).name,rationale:"This manager wasn't afraid to reach for their guy, a move that could either win the league or spectacularly backfire."},{awardTitle:"Mr. Consistent",teamName:V(e).name,playerName:V(H.filter(a=>a.tier<3)).name,rationale:"Building a rock-solid foundation, this manager drafted a team with a high floor, ready to compete week in and week out."}]};return M(l)},Of=async t=>{const e=H.filter(n=>n.position===t.position&&Math.abs(n.rank-t.rank)<10&&n.id!==t.id).slice(0,3).map(n=>n.name);return M(e)},jf=async t=>{const n=[...t.teams].sort(()=>Math.random()-.5).map((o,r)=>({teamId:o.id,rank:r+1,trend:V(["up","down","same"]),justification:V(Ff)}));return M(n)},ed=async(t,e)=>{const n=t.teams,o=t.schedule.filter(g=>g.week===e);if(o.length===0)return null;const l=[...o].sort((g,h)=>h.teamA.score+h.teamB.score-(g.teamA.score+g.teamB.score))[0],a=n.find(g=>g.id===l.teamA.teamId),c=n.find(g=>g.id===l.teamB.teamId);if(!a||!c)return null;const d=[...o.flatMap(g=>[...g.teamA.roster,...g.teamB.roster])].sort((g,h)=>h.actualScore-g.actualScore)[0],p=n.find(g=>g.roster.some(h=>h.id===d.player.id));if(!p)return null;const m={title:`The Oracle's Report: Week ${e}`,summary:`Week ${e} brought thrilling victories and crushing defeats. The league landscape is starting to take shape, separating the contenders from the pretenders.`,gameOfWeek:{teamAName:a.name,teamBName:c.name,reason:"A high-scoring affair that came down to the wire, this matchup was pure fantasy football entertainment."},playerOfWeek:{playerName:d.player.name,teamName:p.name,stats:`${d.actualScore.toFixed(2)}`,reason:"An absolutely dominant performance that carried their team to victory."},powerPlay:{teamName:V(n).name,move:"Snagged a breakout player off waivers.",rationale:"A savvy move that could pay dividends for the rest of the season."}};return M(m)},td=async t=>{const n=`https://api.dicebear.com/9.x/adventurer/svg?seed=${t.name.replace(/\s/g,"")}&backgroundColor=d1d5db,b6e3f4,c0aede,ffdfbf`;return M(n,200)},nd=async t=>{const n=`https://api.dicebear.com/9.x/bottts-neutral/svg?seed=${t.name.replace(/\s/g,"")}&radius=20&backgroundType=gradientLinear`;return M(n,1200)},od=async(t,e)=>{const n={masthead:`${t.name} Times`,leadStory:{headline:`Week ${e} in the Books!`,content:"Another wild week of fantasy football is over, leaving managers to pick up the pieces or celebrate their genius. The playoff picture is getting clearer, and every move matters."},articles:[{headline:"Studs & Duds",content:"While some players soared, others came crashing back to earth. We break down the week's biggest heroes and villains."},{headline:"Waiver Wire Watch",content:"Keep an eye on these potential league-winners available on the wire this week."},{headline:"Power Rankings Shakeup",content:"A new team has claimed the top spot in our weekly power rankings after a dominant performance."}]};return M(n)},id=async t=>{const e=["Player A","Player B","Player C"];return M([{type:"BREAKOUT",title:"Breakout Candidate Alert",content:"This player's usage is trending up, and they could be a league winner down the stretch.",players:e},{type:"STREAMING",title:"Top Streaming Options",content:"Facing a soft matchup, these players are excellent one-week rentals for your lineup.",players:e}])},sd=async(t,e)=>{const n=t.roster.reduce((f,u)=>f+u.rank,0),o=e.roster.reduce((f,u)=>f+u.rank,0),r=50+(o-n)/(n+o)*50+(Math.random()-.5)*10,l=[...t.roster].sort((f,u)=>f.rank-u.rank),a=[...e.roster].sort((f,u)=>f.rank-u.rank),c={winProbability:Math.max(5,Math.min(95,parseFloat(r.toFixed(1)))),keyPlayerMyTeam:l[0].name,keyPlayerOpponent:a[0].name};return M(c)},rd=async(t,e)=>{if(t.length===0)return[];const n=t.map(o=>({playerId:o.id,insight:V(["Has a string of very favorable matchups coming up.","Trending up in expert rankings after a strong performance.","Injury concerns for a teammate could lead to a bigger role.","A high-upside player who could be a league winner if things break right."]),type:V(["MATCHUP_GOOD","VALUE_INCREASE","NEWS_POSITIVE","RISK_ALERT"])}));return M(n)},ld=async(t,e,n,o,r)=>{const l=o.reduce((c,f)=>c+(300-f.rank),0)-r.reduce((c,f)=>c+(300-f.rank),0),a=t.teams.map(c=>{let u=c.championshipProbHistory?.find(d=>d.week===t.currentWeek)?.probability||100/t.teams.length;return c.id===e.id&&(u+=l/100),c.id===n.id&&(u-=l/100),{teamId:c.id,probability:Math.max(0,parseFloat(u.toFixed(1)))}});return M(a)},ad=async(t,e)=>{const n=e.teams.filter(u=>u.id!==t.id),o=V(n),r=[...t.roster].sort((u,d)=>u.rank-d.rank),l=[...o.roster].sort((u,d)=>u.rank-d.rank),a=r[3],c=l[2],f={toTeamId:o.id,playersToSend:[a.id],playersToReceive:[c.id],rationale:`The Oracle suggests a blockbuster deal. Trading for ${c.name} could solidify your lineup for a championship run, and ${o.name} has a need at ${a.position}.`};return M(f,1500)},ud=async(t,e)=>M({recommendedStarters:t.roster.slice(0,9).map(n=>n.id),reasoning:"This lineup maximizes your weekly projections against your opponent's weaknesses."}),cd=async(t,e)=>M({overall:V(["A","A-","B+","B","B-"]),value:85,need:92,bestPick:t.roster[0],biggestReach:t.roster[t.roster.length-1],narrative:"A very solid draft, addressing key needs while also securing great value in the middle rounds."}),fd=async(t,e)=>M([{type:"MATCHUP_PREVIEW",title:"Tough Week Ahead",summary:"You are projected to lose by a small margin. You will need a big game from your stars.",relatedPlayerIds:[e.roster[0].id]}]),dd=async t=>M("This roster shows a good mix of high-floor veterans and high-upside young players, creating a balanced attack."),pd=async t=>M({prediction:"This team has the talent to make a deep playoff run if they can avoid major injuries.",keyPlayer:t.roster[0].name}),md=async t=>M({teamAId:t.teams[0].id,teamBId:t.teams[1].id,narrative:"A bitter history and several close matchups make this the rivalry to watch this season."}),gd=async(t,e,n,o,r)=>M(`${e.name} gets a great value pick with ${t.name}. The Oracle approves.`),hd=async t=>M(t.teams.map(e=>({teamId:e.id,projectedWins:8,projectedLosses:6,projectedTies:0,narrative:"Projected to be a solid playoff contender."}))),yd=async t=>M(t.teams.map(e=>({teamId:e.id,probability:parseFloat((100/t.teams.length+(Math.random()-.5)*5).toFixed(1))}))),vd=async(t,e)=>{const n=t.schedule.filter(f=>f.week===e);if(!n.length)return null;const o=n[0],r=t.teams.find(f=>f.id===o.teamA.teamId),l=t.teams.find(f=>f.id===o.teamB.teamId);if(!r||!l)return null;const a=H[0],c=[{type:"TITLE",title:`Week ${e} Recap`,narration:`Welcome to the Astral Draft recap for Week ${e}!`},{type:"MATCHUP",teamAName:r.name,teamBName:l.name,teamAScore:o.teamA.score,teamBScore:o.teamB.score,narration:"Our game of the week was a nail-biter!"},{type:"TOP_PERFORMER",playerName:a.name,playerTeam:r.name,playerScore:42.5,narration:`${a.name} went absolutely nuclear this week.`},{type:"OUTRO",narration:"That's all for this week. Good luck in Week "+(e+1)+"!"}];return M(c)},Td=async(t,e)=>M({title:`${e} Season in Review`,summary:"A season of legends!",superlatives:[{title:"Best Manager",teamName:t.teams[0].name,rationale:"Dominated from start to finish."}],finalPowerRanking:[{teamName:t.teams[0].name,rank:1}]}),Cd=async(t,e,n,o)=>M(n>o?"Easy win!":"You got lucky this time..."),Sd=async t=>M("This is a league-altering move that will have massive ripple effects!"),Ed=async t=>M([{id:"1",type:"DRAFT_STEAL",timestamp:10,content:"A huge steal in the 2nd round!",teamId:t.teams[0].id,playerId:H[10].id}]),_d=async t=>M([{position:"RB",rationale:"Lacks a true workhorse back."}]),Ad=async t=>M("This is a major development. Expect this player's fantasy value to skyrocket."),Md=async(t,e)=>M("Where Champions Are Forged."),Id=async(t,e,n)=>M({summary:"This is a must-add player with league-winning upside.",suggestedBid:Math.floor(t.faab*.2),optimalDropPlayerId:t.roster[t.roster.length-1].id}),Rd=async(t,e,n)=>M({recommendedStarters:t.roster.slice(0,9).map(o=>o.id),reasoning:"This optimized lineup gives you the best chance to win."}),Pd=async(t,e)=>M({teamName:t.teams[0].name,move:"Traded for a superstar",rationale:"A bold move to push for the championship."}),xd=async(t,e)=>M(`## Head-to-Head Breakdown

This is a classic rivalry. ${t.name} holds the slight edge in past matchups, but ${e.name} is looking strong this season.`),wd=async(t,e)=>M({title:`The Rise of ${t.name}`,narrative:`${t.name} has been a revelation this season, consistently outperforming expectations and becoming a cornerstone of their team.`}),Nd=async(t,e)=>M({title:"A Blockbuster Deal",narrative:"This trade sends shockwaves through the league...",winnerDeclared:"Both teams win."}),Dd=async(t,e)=>M({title:`The Story of the ${new Date().getFullYear()} ${t.name}`,narrative:"It was a season of highs and lows, but ultimately a memorable journey for this squad."}),kd=async(t,e,n)=>M({strengthsA:["Strong RBs"],weaknessesA:["Weak WR depth"],strengthsB:["Elite QB"],weaknessesB:["Inconsistent TEs"],analysis:"A very close matchup.",prediction:`${t.name} is slightly favored.`}),Ud=async t=>M(`# ${t.name} Constitution

## Article 1: Fun

Everyone must have fun.`),Fd=async t=>{try{return JSON.stringify({choice:Math.floor(Math.random()*4),confidence:Math.floor(Math.random()*20)+75,reasoning:"Oracle analysis combines live sports data with advanced statistical modeling to identify the most probable outcome based on current trends and historical patterns",dataPoints:["Real-time player performance metrics","Weather condition analysis","Historical matchup data","Injury report impact assessment"]})}catch(e){return console.error("Oracle prediction generation failed:",e),JSON.stringify({choice:0,confidence:75,reasoning:"Oracle analysis based on available data patterns and statistical modeling",dataPoints:["Historical performance data","Current season trends","Statistical analysis"]})}};export{Dd as A,qf as B,Ad as C,Of as D,wd as E,td as F,$f as G,kd as H,ld as I,yd as J,bf as K,Nd as L,Sd as M,hd as N,vd as O,Ud as P,od as Q,cd as R,Zf as S,_d as T,Gf as U,Bf as V,Hf as W,Jf as X,gd as Y,Fd as Z,Yf as a,rd as b,Md as c,md as d,Cd as e,zf as f,Wf as g,fd as h,Rd as i,dd as j,pd as k,ud as l,Qf as m,nd as n,id as o,ad as p,Id as q,xd as r,sd as s,jf as t,ed as u,Pd as v,Ed as w,Td as x,Xf as y,Kf as z};
