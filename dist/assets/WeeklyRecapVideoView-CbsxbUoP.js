import{R as m,b as E,j as e,A as R,m as r,u as P}from"./index-COBmtdYu.js";import{u as V}from"./useLeague-Cpfoz4PJ.js";import{O as D}from"./geminiService-1862MQGr.js";import{E as y}from"./ErrorDisplay-DvGa1LPk.js";import{L as v}from"./LoadingSpinner-DSQnnH7P.js";import{A as x,L as S}from"./Avatar-BTFtifDF.js";import{P as h,a as A}from"./PauseIcon-DkeJvfy3.js";const b=5e3,g=({scene:a})=>e.jsxDEV(r.div,{className:"w-full h-full flex flex-col items-center justify-center text-center p-8 bg-gradient-to-br from-gray-900 to-black",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},transition:{duration:.8},children:[e.jsxDEV("h1",{className:"font-display text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-300 via-cyan-300 to-indigo-400",children:a.title},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:28,columnNumber:9},void 0),e.jsxDEV("p",{className:"mt-4 text-lg text-gray-300",children:a.narration},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:31,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:19,columnNumber:5},void 0),O=({scene:a,league:l})=>{const t=l.teams.find(i=>i.name===a.teamAName),n=l.teams.find(i=>i.name===a.teamBName);return e.jsxDEV(r.div,{className:"w-full h-full flex flex-col items-center justify-center p-8 bg-gradient-to-b from-gray-800 to-gray-900",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row items-center justify-around w-full gap-4",children:[e.jsxDEV(r.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"text-center",children:[e.jsxDEV(x,{avatar:t?.avatar||"ðŸˆ",className:"w-24 h-24 text-6xl mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:50,columnNumber:21},void 0),e.jsxDEV("p",{className:"mt-2 font-bold text-xl",children:t?.name},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:51,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:49,columnNumber:17},void 0),e.jsxDEV(r.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4},className:"text-center",children:[e.jsxDEV("p",{className:"font-display text-6xl font-bold",children:[a.teamAScore?.toFixed(2)," - ",a.teamBScore?.toFixed(2)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:54,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-red-400 font-bold mt-1",children:a.type==="UPSET"?"UPSET ALERT":"FINAL"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:55,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:53,columnNumber:17},void 0),e.jsxDEV(r.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"text-center",children:[e.jsxDEV(x,{avatar:n?.avatar||"ðŸˆ",className:"w-24 h-24 text-6xl mx-auto rounded-lg"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:58,columnNumber:22},void 0),e.jsxDEV("p",{className:"mt-2 font-bold text-xl",children:n?.name},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:59,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:57,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:48,columnNumber:13},void 0),e.jsxDEV(r.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},className:"mt-8 text-lg text-gray-300 text-center italic",children:['"',a.narration,'"']},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:62,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:39,columnNumber:10},void 0)},j=({scene:a,league:l})=>{const t=l.teams.find(n=>n.name===a.playerTeam);return e.jsxDEV(r.div,{className:"w-full h-full flex flex-col items-center justify-center p-8 bg-gradient-to-b from-yellow-900/50 to-gray-900",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[e.jsxDEV(r.p,{initial:{y:-20},animate:{y:0},className:"font-display text-3xl text-yellow-300",children:"PLAYER OF THE WEEK"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:81,columnNumber:13},void 0),e.jsxDEV(r.div,{initial:{scale:.5},animate:{scale:1},transition:{delay:.2},className:"my-4",children:e.jsxDEV(x,{avatar:t?.avatar||"ðŸˆ",className:"w-24 h-24 text-6xl rounded-full ring-4 ring-yellow-400"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:83,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:82,columnNumber:13},void 0),e.jsxDEV(r.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-3xl font-bold",children:a.playerName},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:85,columnNumber:13},void 0),e.jsxDEV(r.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"text-5xl font-display font-bold text-yellow-300 my-2",children:[a.playerScore?.toFixed(2)," PTS"]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:86,columnNumber:13},void 0),e.jsxDEV(r.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},className:"mt-4 text-lg text-gray-300 text-center italic",children:['"',a.narration,'"']},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:87,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:72,columnNumber:10},void 0)},w=({scene:a})=>e.jsxDEV(r.div,{className:"w-full h-full flex flex-col items-center justify-center text-center p-8 bg-gradient-to-br from-gray-900 to-black",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:[e.jsxDEV(S,{src:"/favicon.svg",alt:"Astral Draft",className:"w-16 h-16 mb-4",loading:"lazy"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:104,columnNumber:9},void 0),e.jsxDEV("p",{className:"text-lg text-gray-300",children:a.narration},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:110,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:95,columnNumber:6},void 0),C=({script:a,league:l})=>{const[t,n]=m.useState(0),[i,f]=m.useState(!0),d=m.useRef(null),p=E("bid",.3);m.useEffect(()=>{const o=()=>{n(c=>c<a.length-1?c+1:(f(!1),c))};return i&&(d.current=setTimeout(o,b)),()=>{d.current&&clearTimeout(d.current)}},[t,i,a]);const u=()=>{p(),f(o=>!o)},s=a[t];return e.jsxDEV("div",{className:"w-full h-full flex flex-col relative text-white",children:[e.jsxDEV("div",{className:"flex-grow",children:e.jsxDEV(R,{mode:"wait",children:[s.type==="TITLE"&&e.jsxDEV(g,{scene:s},t,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:154,columnNumber:55},void 0),(s.type==="MATCHUP"||s.type==="UPSET")&&e.jsxDEV(O,{scene:s,league:l},t,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:155,columnNumber:92},void 0),s.type==="TOP_PERFORMER"&&e.jsxDEV(j,{scene:s,league:l},t,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:156,columnNumber:63},void 0),s.type==="OUTRO"&&e.jsxDEV(w,{scene:s},t,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:157,columnNumber:55},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:153,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:152,columnNumber:13},void 0),e.jsxDEV("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:[e.jsxDEV("div",{className:"w-full bg-white/20 h-1.5 rounded-full",children:e.jsxDEV(r.div,{className:"h-full bg-cyan-400 rounded-full",initial:{width:"0%"},animate:{width:i?"100%":"0%"},transition:{duration:i?b/1e3:0,ease:"linear"}},t,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:162,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:161,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center justify-between mt-2",children:[e.jsxDEV("button",{onClick:u,className:"p-2 rounded-full text-white bg-white/10 hover:bg-white/20",children:i?e.jsxDEV(h,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:174,columnNumber:38},void 0):e.jsxDEV(A,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:174,columnNumber:54},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:173,columnNumber:21},void 0),e.jsxDEV("span",{className:"text-xs font-mono",children:[t+1," / ",a.length]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:176,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:172,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:160,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/reports/RecapVideoPlayer.tsx",lineNumber:151,columnNumber:9},void 0)},F=()=>{const{state:a,dispatch:l}=P(),{league:t}=V(),[n,i]=m.useState(null),[f,d]=m.useState(!0),[p,u]=m.useState(null),s=t&&t.currentWeek>1?t.currentWeek-1:1,o=t?`${t.id}_${s}`:"";return m.useEffect(()=>{if(!t||!o)return;const c=a.weeklyRecapScripts[o];if(c){i(c),d(!1);return}d(!0),u(null),D(t,s).then(N=>{N?(i(N),l({type:"SET_WEEKLY_RECAP_SCRIPT",payload:{key:o,script:N}})):u("The Oracle could not produce a video script for this week.")}).catch(()=>u("An error occurred while consulting the Oracle.")).finally(()=>d(!1))},[t,s,o,a.weeklyRecapScripts,l]),t?e.jsxDEV("div",{className:"w-full h-full flex flex-col items-center justify-center p-4",children:[e.jsxDEV("div",{className:"w-full max-w-4xl aspect-video bg-black rounded-2xl shadow-2xl shadow-black/50 overflow-hidden relative glass-pane",children:[f&&e.jsxDEV(v,{text:"Generating your weekly highlight reel..."},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/WeeklyRecapVideoView.tsx",lineNumber:54,columnNumber:31},void 0),p&&e.jsxDEV(y,{message:p},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/WeeklyRecapVideoView.tsx",lineNumber:55,columnNumber:27},void 0),n&&e.jsxDEV(C,{script:n,league:t},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/WeeklyRecapVideoView.tsx",lineNumber:56,columnNumber:28},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/WeeklyRecapVideoView.tsx",lineNumber:53,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>l({type:"SET_VIEW",payload:"WEEKLY_REPORT"}),className:"mt-6 px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20",children:"Back to Report"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/WeeklyRecapVideoView.tsx",lineNumber:58,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/WeeklyRecapVideoView.tsx",lineNumber:52,columnNumber:9},void 0):e.jsxDEV(y,{title:"Error",message:"No active league found.",onRetry:()=>l({type:"SET_VIEW",payload:"DASHBOARD"})},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/WeeklyRecapVideoView.tsx",lineNumber:48,columnNumber:16},void 0)};export{F as WeeklyRecapVideoView,F as default};
