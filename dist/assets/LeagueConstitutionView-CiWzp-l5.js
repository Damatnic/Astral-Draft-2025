import{u as w,R as i,j as e,C as v}from"./index-COBmtdYu.js";import{u as g}from"./useLeague-Cpfoz4PJ.js";import{W as E}from"./Widget-BuBclpAe.js";import{E as f}from"./ErrorDisplay-DvGa1LPk.js";import{F as p}from"./FileTextIcon-soJqG5P5.js";import{P as D}from"./geminiService-1862MQGr.js";import{L as V}from"./LoadingSpinner-DSQnnH7P.js";import{u as h,C as S}from"./ClipboardIcon-CRsYat4b.js";import{M as L}from"./index-CwQkY9CC.js";const I=()=>{const{state:c,dispatch:r}=w(),{league:t}=g(),[s,N]=i.useState(null),[x,o]=i.useState(!1),[l,a]=i.useState(null),[u,m]=i.useState(!1),{copy:b}=h();if(!t||c.user.id!==t.commissionerId)return e.jsxDEV(f,{title:"Access Denied",message:"You are not the commissioner of this league.",onRetry:()=>r({type:"SET_VIEW",payload:"DASHBOARD"})},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:25,columnNumber:16},void 0);const d=async()=>{o(!0),a(null);try{const n=await D(t);n?N(n):a("The Oracle could not generate a constitution. Please try again.")}catch{a("An error occurred while consulting the Oracle.")}finally{o(!1)}},C=()=>{s&&(b(s),m(!0),setTimeout(()=>m(!1),2e3))};return e.jsxDEV("div",{className:"w-full h-full flex flex-col p-4 sm:p-6 lg:p-8 overflow-y-auto",children:[e.jsxDEV("header",{className:"flex-shrink-0 flex justify-between items-center mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"font-display text-3xl sm:text-4xl font-extrabold tracking-wider uppercase text-[var(--text-primary)]",children:"League Constitution"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:56,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-[var(--text-secondary)] tracking-widest",children:t.name},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:59,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:55,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>r({type:"SET_VIEW",payload:"COMMISSIONER_TOOLS"}),className:"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20",children:"Back to Tools"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:61,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:54,columnNumber:13},void 0),e.jsxDEV("main",{className:"flex-grow max-w-4xl mx-auto w-full",children:e.jsxDEV(E,{title:"League Constitution & Bylaws",icon:e.jsxDEV(p,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:66,columnNumber:68},void 0),children:e.jsxDEV("div",{className:"p-4",children:x?e.jsxDEV(V,{text:"The Oracle is drafting your constitution..."},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:68,columnNumber:38},void 0):l?e.jsxDEV(f,{message:l,onRetry:d},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:69,columnNumber:34},void 0):s?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex justify-end mb-2",children:e.jsxDEV("button",{onClick:C,className:"flex items-center gap-1.5 px-3 py-1 text-xs font-bold bg-white/10 rounded-md hover:bg-white/20",children:[u?e.jsxDEV(v,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:74,columnNumber:53},void 0):e.jsxDEV(S,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:74,columnNumber:69},void 0),u?"Copied!":"Copy to Clipboard"]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:73,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:72,columnNumber:33},void 0),e.jsxDEV("div",{className:"prose prose-sm prose-invert bg-black/20 p-4 rounded-lg max-h-[60vh] overflow-y-auto",children:e.jsxDEV(L,{children:s},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:79,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:78,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:71,columnNumber:29},void 0):e.jsxDEV("div",{className:"text-center py-8",children:[e.jsxDEV("p",{className:"text-gray-400 mb-4",children:"Generate a formal constitution for your league based on its current settings."},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:84,columnNumber:33},void 0),e.jsxDEV("button",{onClick:d,className:"px-6 py-2 bg-cyan-500 text-black font-bold text-sm rounded-md",children:"Generate Constitution"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:85,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:83,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:67,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:66,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:65,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/LeagueConstitutionView.tsx",lineNumber:53,columnNumber:9},void 0)};export{I as default};
