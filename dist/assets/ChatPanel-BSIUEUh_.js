import{j as e,p as A,a as R,S as j,u as O,R as p}from"./index-COBmtdYu.js";import{f as _}from"./time-Dhalli9x.js";import{K as y}from"./geminiService-1862MQGr.js";import{S as U}from"./SwordIcon-CQ_MBaSO.js";import{T as V}from"./Tooltip-DfORbG6k.js";const T=["👍","😂","🔥","🤔","😢","🤯"],C=({onSelect:n})=>e.jsxDEV("div",{className:"absolute -top-4 right-2 sm:right-auto sm:left-2 flex items-center gap-1 p-1 bg-gray-800/90 border border-white/10 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:T.map(i=>e.jsxDEV("button",{onClick:()=>n(i),className:"text-lg p-1 rounded-full hover:bg-white/20 transform hover:scale-125 transition-transform",children:i},i,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ReactionPicker.tsx",lineNumber:14,columnNumber:9},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ReactionPicker.tsx",lineNumber:12,columnNumber:5},void 0),k=({message:n,league:i,onReact:c})=>{const{tradeEvent:r,aiHotTake:u,reactions:f}=n;if(!r)return null;const b=i.teams.find(t=>t.id===r.fromTeamId),E=i.teams.find(t=>t.id===r.toTeamId);if(!b||!E)return null;const N=new Map(A.map(t=>[t.id,t])),s=r.playersOffered.map(t=>N.get(t)).filter(Boolean),v=r.playersRequested.map(t=>N.get(t)).filter(Boolean),l=r.draftPicksOffered||[],D=r.draftPicksRequested||[],x=({children:t,isPick:m})=>e.jsxDEV("div",{className:`px-1.5 py-0.5 rounded text-xs ${m?"bg-cyan-900/80":"bg-black/20"}`,children:t},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:34,columnNumber:9},void 0);return e.jsxDEV("div",{className:"p-3 my-2 bg-gradient-to-br from-gray-800/50 to-gray-900/50 border-2 border-purple-400/20 rounded-lg group relative",children:[e.jsxDEV(C,{onSelect:t=>c(n.id,t)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:39,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 text-purple-300 font-bold text-sm mb-2",children:[e.jsxDEV(R,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:41,columnNumber:17},void 0),e.jsxDEV("span",{children:"TRADE ACCEPTED"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:42,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:40,columnNumber:13},void 0),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2 text-center text-xs",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-semibold",children:[b.name," gives:"]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:47,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:[s.map(t=>e.jsxDEV(x,{children:t.name},t.id,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:49,columnNumber:50},void 0)),l.map((t,m)=>e.jsxDEV(x,{isPick:!0,children:[t.season," R",t.round]},m,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:50,columnNumber:53},void 0))]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:48,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:46,columnNumber:17},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-semibold",children:[E.name," gives:"]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:54,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:[v.map(t=>e.jsxDEV(x,{children:t.name},t.id,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:56,columnNumber:52},void 0)),D.map((t,m)=>e.jsxDEV(x,{isPick:!0,children:[t.season," R",t.round]},m,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:57,columnNumber:55},void 0))]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:55,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:53,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:45,columnNumber:13},void 0),u&&e.jsxDEV("div",{className:"mt-2 pt-2 border-t border-white/10 text-center",children:[e.jsxDEV("p",{className:"text-xs text-cyan-300/80 font-semibold flex items-center justify-center gap-1",children:[e.jsxDEV(j,{className:"w-3 h-3"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:65,columnNumber:25},void 0),"Oracle's Take"]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:64,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-xs italic text-gray-300",children:['"',u,'"']},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:68,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:63,columnNumber:17},void 0),f&&Object.keys(f).length>0&&e.jsxDEV("div",{className:"flex gap-1 mt-2 justify-center",children:Object.entries(f).map(([t,m])=>e.jsxDEV("div",{className:"px-1.5 py-0.5 bg-black/30 rounded-full text-xs flex items-center gap-1",children:[e.jsxDEV("span",{children:t},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:76,columnNumber:29},void 0),e.jsxDEV("span",{className:"text-gray-300",children:m.length},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:77,columnNumber:29},void 0)]},t,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:75,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:73,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/TradeEventMessage.tsx",lineNumber:38,columnNumber:9},void 0)},B=()=>{const{state:n,dispatch:i}=O(),[c,r]=p.useState(""),[u,f]=p.useState(!1),b=p.useRef(null),[E,N]=p.useState(!1),s=n.leagues.find(a=>a.id===n.activeLeagueId),v=s?.chatMessages||[],l=s?.teams.find(a=>a.owner.id===n.user.id);p.useEffect(()=>{b.current?.scrollIntoView({behavior:"smooth"})},[v]);const D=()=>{c.trim()===""||!s||(i({type:"ADD_CHAT_MESSAGE",payload:{leagueId:s.id,message:{user:n.user,text:c}}}),r(""))},x=async()=>{if(!l||!s)return;const a=s.schedule.find(h=>h.week===s.currentWeek&&(h.teamA.teamId===l.id||h.teamB.teamId===l.id));if(!a)return;const d=a.teamA.teamId===l.id?a.teamB.teamId:a.teamA.teamId,o=s.teams.find(h=>h.id===d);if(!o)return;f(!0);const g=await y(l,o);g&&r(g),f(!1)},t=(a,d)=>{s&&i({type:"ADD_CHAT_REACTION",payload:{leagueId:s.id,messageId:a,emoji:d,userId:n.user.id}})},m=a=>{const d=a.target.value;r(d),d.endsWith("@")?N(!0):N(!1)},P=a=>{r(d=>d.slice(0,-1)+`@${a} `),N(!1)},S=l&&s&&s.schedule.some(a=>a.week===s.currentWeek&&(a.teamA.teamId===l.id||a.teamB.teamId===l.id));return e.jsxDEV("div",{className:"glass-pane h-full flex flex-col bg-[var(--panel-bg)] border-[var(--panel-border)] rounded-2xl shadow-lg",children:[e.jsxDEV("div",{className:"flex-shrink-0 p-3 text-center border-b border-[var(--panel-border)]",children:e.jsxDEV("h3",{className:"font-display text-lg font-bold text-[var(--text-primary)]",children:"LEAGUE CHAT"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:91,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:90,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-grow p-2 space-y-3 overflow-y-auto",children:[v.map(a=>{const d=a.mentions?.includes(n.user.id);return a.isSystemMessage&&a.tradeEvent&&s?e.jsxDEV(k,{message:a,league:s,onReact:t},a.id,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:97,columnNumber:32},void 0):a.isSystemMessage?e.jsxDEV("div",{className:"text-center text-xs text-cyan-300/80 italic p-2",children:e.jsxDEV("span",{children:a.text},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:101,columnNumber:29},void 0)},a.id,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:100,columnNumber:26},void 0):e.jsxDEV("div",{className:`flex items-start gap-2.5 text-sm group relative ${a.user.id===n.user.id?"justify-end":""}`,children:[a.user.id!==n.user.id&&e.jsxDEV("span",{className:"text-xl mt-1",children:a.user.avatar},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:105,columnNumber:63},void 0),e.jsxDEV("div",{className:"flex flex-col gap-1 w-full max-w-[85%]",children:[e.jsxDEV(C,{onSelect:o=>t(a.id,o)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:107,columnNumber:34},void 0),e.jsxDEV("div",{className:`p-2 rounded-lg ${a.user.id===n.user.id?"bg-cyan-600 self-end":"bg-black/20 self-start"} ${d?"ring-2 ring-yellow-400":""}`,children:e.jsxDEV("p",{children:a.text},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:109,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:108,columnNumber:33},void 0),a.reactions&&Object.keys(a.reactions).length>0&&e.jsxDEV("div",{className:`flex gap-1 ${a.user.id===n.user.id?"self-end":"self-start"}`,children:Object.entries(a.reactions).map(([o,g])=>e.jsxDEV("div",{className:"px-1.5 py-0.5 bg-black/30 rounded-full text-xs flex items-center gap-1",children:[e.jsxDEV("span",{children:o},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:115,columnNumber:49},void 0),e.jsxDEV("span",{className:"text-gray-300",children:g.length},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:116,columnNumber:49},void 0)]},o,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:114,columnNumber:45},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:112,columnNumber:37},void 0),e.jsxDEV("div",{className:`text-xs text-gray-500 ${a.user.id===n.user.id?"self-end":"self-start"}`,children:[a.user.name," • ",_(a.timestamp)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:121,columnNumber:33},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:106,columnNumber:29},void 0)]},a.id,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:104,columnNumber:25},void 0)}),e.jsxDEV("div",{ref:b},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:128,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:93,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-shrink-0 p-2 border-t border-[var(--panel-border)] relative",children:[E&&s&&e.jsxDEV("div",{className:"absolute bottom-full left-2 w-1/2 bg-gray-900 border border-white/10 rounded-lg shadow-lg p-1",children:s.members.filter(a=>a.id!==n.user.id).map(a=>e.jsxDEV("button",{onClick:()=>P(a.name),className:"w-full text-left p-1.5 text-sm rounded hover:bg-white/10",children:a.name},a.id,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:134,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:132,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[S&&e.jsxDEV(V,{text:"Generate AI Trash Talk",children:e.jsxDEV("button",{onClick:x,disabled:u,className:"p-2 bg-black/10 dark:bg-gray-900/50 border border-[var(--panel-border)] rounded-md text-purple-400 hover:bg-black/20 disabled:opacity-50",children:u?e.jsxDEV("div",{className:"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:144,columnNumber:49},void 0):e.jsxDEV(U,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:144,columnNumber:152},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:143,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:142,columnNumber:25},void 0),e.jsxDEV("input",{type:"text",placeholder:u?"Cooking up some spice...":"Send a message...",value:c,onChange:m,onKeyDown:a=>a.key==="Enter"&&D(),className:"flex-grow bg-black/10 dark:bg-gray-900/50 border border-[var(--panel-border)] rounded-md px-3 py-1.5 text-sm placeholder:text-[var(--text-secondary)] focus:outline-none focus:ring-1 focus:ring-cyan-400"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:148,columnNumber:21},void 0),e.jsxDEV("button",{onClick:D,disabled:!c,className:"px-4 py-1.5 bg-cyan-500 text-black font-bold text-sm rounded-md hover:bg-cyan-400 disabled:opacity-50",children:"Send"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:156,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:140,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:130,columnNumber:14},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/chat/ChatPanel.tsx",lineNumber:89,columnNumber:9},void 0)};export{B as C};
