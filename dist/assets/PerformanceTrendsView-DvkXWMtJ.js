import{R as h,j as e,u as k}from"./index-COBmtdYu.js";import{u as _}from"./useLeague-Cpfoz4PJ.js";import{W as S}from"./Widget-BuBclpAe.js";import{E as O}from"./ErrorDisplay-DvGa1LPk.js";import{C as y}from"./ChartBarIcon-CEVV4YNe.js";import{T as C}from"./Tooltip-DfORbG6k.js";const U=({player:o,league:d})=>{const n=h.useMemo(()=>{const i=[];for(let a=1;a<d.currentWeek;a++){const m=d.schedule.find(c=>c.week===a);if(!m)continue;const t=(m.teamA.roster.find(c=>c.player.id===o.id)||m.teamB.roster.find(c=>c.player.id===o.id))?.actualScore||0,b=o.stats.weeklyProjections[a]||o.stats.projection/17;i.push({week:a,actualScore:t,projectedScore:b})}return i},[o,d]);if(n.length===0)return e.jsxDEV("p",{className:"text-center text-sm text-gray-400 p-8",children:"No games have been played yet."},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:29,columnNumber:16},void 0);const l=Math.max(...n.flatMap(i=>[i.actualScore,i.projectedScore]),1);return e.jsxDEV("div",{className:"p-4 sm:p-6 h-80 flex flex-col",children:[e.jsxDEV("div",{className:"flex-grow flex items-end gap-2 sm:gap-4 border-b-2 border-l-2 border-white/10 p-2",children:n.map(({week:i,actualScore:a,projectedScore:m})=>e.jsxDEV("div",{className:"flex-1 h-full flex flex-col justify-end items-center",children:[e.jsxDEV("div",{className:"relative w-full h-full flex items-end justify-center",children:[e.jsxDEV(C,{text:`Actual: ${a.toFixed(2)}`,children:e.jsxDEV("div",{className:"w-1/2 bg-cyan-500 rounded-t-md",style:{height:`${a/l*100}%`}},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:41,columnNumber:33},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:40,columnNumber:29},void 0),e.jsxDEV(C,{text:`Projected: ${m.toFixed(2)}`,children:e.jsxDEV("div",{className:"absolute w-full bottom-0 border-t-2 border-dashed border-yellow-400",style:{height:`${m/l*100}%`}},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:47,columnNumber:34},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:46,columnNumber:29},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:39,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-xs text-gray-400 mt-1",children:["Wk ",i]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:53,columnNumber:25},void 0)]},i,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:38,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:36,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-shrink-0 flex justify-center gap-6 text-xs mt-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-3 h-3 bg-cyan-500 rounded-sm"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:59,columnNumber:21},void 0),e.jsxDEV("span",{children:"Actual Score"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:60,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:58,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-5 h-px border-t-2 border-dashed border-yellow-400"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:63,columnNumber:21},void 0),e.jsxDEV("span",{children:"Projected Score"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:64,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:62,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:57,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/PlayerPerformanceChart.tsx",lineNumber:35,columnNumber:9},void 0)},W=({team:o,league:d})=>{const n=h.useRef(null),[l,i]=h.useState(null),a=h.useMemo(()=>{const r=[];for(let s=1;s<d.currentWeek;s++){const f=d.schedule.find(x=>x.week===s&&(x.teamA.teamId===o.id||x.teamB.teamId===o.id)),E=f?f.teamA.teamId===o.id?f.teamA.score:f.teamB.score:0,N=d.schedule.filter(x=>x.week===s),j=N.reduce((x,P)=>x+P.teamA.score+P.teamB.score,0),R=N.length>0?j/(N.length*2):0;r.push({week:s,myScore:E,leagueAverage:R})}return r},[o,d]);if(a.length<2)return e.jsxDEV("p",{className:"text-center text-sm text-gray-400 p-8",children:"Not enough data to display a trend."},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:29,columnNumber:16},void 0);const m=500,u=300,t={top:20,right:20,bottom:40,left:50},b=Math.max(...a.flatMap(r=>[r.myScore,r.leagueAverage]),1),c=a.map(r=>r.week),p=r=>t.left+(r-c[0])/(c[c.length-1]-c[0]||1)*(m-t.left-t.right),D=r=>u-t.bottom-r/b*(u-t.top-t.bottom),v=r=>a.map((s,f)=>`${f===0?"M":"L"} ${p(s.week)},${D(s[r])}`).join(" "),A=v("myScore"),V=v("leagueAverage"),g=r=>{if(!n.current)return;const s=n.current.getBoundingClientRect(),f=r.clientX-s.left,E=Math.round((f-t.left)/(m-t.left-t.right)*(c.length-1)),N=a[E];N&&i({x:r.clientX-s.left,y:r.clientY-s.top,content:e.jsxDEV("div",{className:"p-2 bg-gray-900/80 border border-white/10 rounded-lg text-xs shadow-lg",children:[e.jsxDEV("p",{className:"font-bold mb-1",children:["Week ",N.week]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:63,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-cyan-500"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:65,columnNumber:25},void 0),e.jsxDEV("span",{children:"My Score:"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:66,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-bold",children:N.myScore.toFixed(2)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:67,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:64,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-2 h-2 rounded-full bg-gray-500"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:70,columnNumber:25},void 0),e.jsxDEV("span",{children:"League Avg:"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:71,columnNumber:25},void 0),e.jsxDEV("span",{className:"font-bold",children:N.leagueAverage.toFixed(2)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:72,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:69,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:62,columnNumber:17},void 0)})},w=()=>i(null);return e.jsxDEV("div",{className:"p-4 sm:p-6 h-full flex flex-col",children:[e.jsxDEV("div",{className:"relative flex-grow",children:[e.jsxDEV("svg",{ref:n,viewBox:`0 0 ${m} ${u}`,onMouseMove:g,onMouseLeave:w,className:"w-full h-full",children:[e.jsxDEV("line",{x1:t.left,y1:u-t.bottom,x2:m-t.right,y2:u-t.bottom,stroke:"#475569"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:86,columnNumber:21},void 0),e.jsxDEV("line",{x1:t.left,y1:t.top,x2:t.left,y2:u-t.bottom,stroke:"#475569"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:87,columnNumber:21},void 0),[0,.25,.5,.75,1].map(r=>{const s=D(r*b);return e.jsxDEV("g",{children:[e.jsxDEV("text",{x:t.left-8,y:s,textAnchor:"end",alignmentBaseline:"middle",fill:"#94a3b8",fontSize:"10",children:Math.round(r*b)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:93,columnNumber:33},void 0),e.jsxDEV("line",{x1:t.left,y1:s,x2:m-t.right,y2:s,stroke:"#475569",strokeDasharray:"2,2",opacity:"0.3"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:96,columnNumber:33},void 0)]},r,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:92,columnNumber:30},void 0)}),c.map(r=>e.jsxDEV("text",{x:p(r),y:u-t.bottom+15,textAnchor:"middle",fill:"#94a3b8",fontSize:"10",children:["W",r]},r,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:101,columnNumber:26},void 0)),e.jsxDEV("path",{d:V,fill:"none",stroke:"#6b7280",strokeWidth:"2",strokeDasharray:"4,4"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:107,columnNumber:21},void 0),e.jsxDEV("path",{d:A,fill:"none",stroke:"#06b6d4",strokeWidth:"3"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:108,columnNumber:21},void 0),a.map(r=>e.jsxDEV("circle",{cx:p(r.week),cy:D(r.myScore),r:"3",fill:"#06b6d4"},`my-${r.week}`,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:112,columnNumber:26},void 0)),a.map(r=>e.jsxDEV("circle",{cx:p(r.week),cy:D(r.leagueAverage),r:"3",fill:"#6b7280"},`avg-${r.week}`,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:115,columnNumber:26},void 0)),l&&e.jsxDEV("line",{x1:l.x,y1:t.top,x2:l.x,y2:u-t.bottom,stroke:"#facc15",strokeDasharray:"3,3"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:120,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:84,columnNumber:17},void 0),l&&e.jsxDEV("div",{className:"absolute pointer-events-none p-2 rounded-lg",style:{left:l.x+10,top:l.y-30},children:l.content},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:124,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:83,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-shrink-0 flex justify-center gap-6 text-xs mt-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-3 h-3 bg-cyan-500 rounded-sm"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:131,columnNumber:21},void 0),e.jsxDEV("span",{children:"My Score"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:132,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:130,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-5 h-px border-t-2 border-dashed border-gray-500"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:135,columnNumber:21},void 0),e.jsxDEV("span",{children:"League Average"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:136,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:134,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:129,columnNumber:14},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/components/trends/WeeklyScoreChart.tsx",lineNumber:82,columnNumber:9},void 0)},F=()=>{const{dispatch:o}=k(),{league:d,myTeam:n}=_(),[l,i]=h.useState(n?.roster[0]||null);return!d||!n?e.jsxDEV(O,{title:"No Data Available",message:"Please select a league to view performance trends.",onRetry:()=>o({type:"SET_VIEW",payload:"DASHBOARD"})},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:18,columnNumber:16},void 0):e.jsxDEV("div",{className:"w-full h-full flex flex-col p-4 sm:p-6 lg:p-8 overflow-y-auto",children:[e.jsxDEV("header",{className:"flex-shrink-0 flex justify-between items-center mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"font-display text-3xl sm:text-4xl font-extrabold tracking-wider uppercase text-[var(--text-primary)]",children:"Performance Trends"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:25,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-sm text-[var(--text-secondary)] tracking-widest",children:[n.name," - ",d.name]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:28,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:24,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>o({type:"SET_VIEW",payload:"TEAM_HUB"}),className:"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20",children:"Back to Team Hub"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:30,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:23,columnNumber:14},void 0),e.jsxDEV("main",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV(S,{title:"Player Performance",icon:e.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:35,columnNumber:58},void 0),children:[e.jsxDEV("div",{className:"p-4 border-b border-white/10",children:[e.jsxDEV("label",{htmlFor:"player-select",className:"text-sm font-semibold text-gray-400 mr-2",children:"Select Player:"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:37,columnNumber:25},void 0),e.jsxDEV("select",{id:"player-select",value:l?.id||"",onChange:a=>{const m=n.roster.find(u=>u.id===Number(a.target.value));i(m||null)},className:"bg-black/20 p-2 rounded-md border border-white/10 focus:ring-2 focus:ring-cyan-400 focus:outline-none",children:n.roster.map(a=>e.jsxDEV("option",{value:a.id,children:[a.name," (",a.position,")"]},a.id,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:48,columnNumber:33},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:38,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:36,columnNumber:21},void 0),l?e.jsxDEV(U,{player:l,league:d},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:55,columnNumber:25},void 0):e.jsxDEV("p",{className:"p-8 text-center text-gray-400",children:"Select a player to view their trends."},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:57,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:35,columnNumber:17},void 0),e.jsxDEV(S,{title:"Team Score vs. League Average",icon:e.jsxDEV(y,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:60,columnNumber:70},void 0),children:e.jsxDEV(W,{team:n,league:d},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:61,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:60,columnNumber:18},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:34,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/PerformanceTrendsView.tsx",lineNumber:22,columnNumber:9},void 0)};export{F as default};
