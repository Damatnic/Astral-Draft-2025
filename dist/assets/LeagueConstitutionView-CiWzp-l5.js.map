{"version":3,"file":"LeagueConstitutionView-CiWzp-l5.js","sources":["../../views/LeagueConstitutionView.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { useAppState } from '../contexts/AppContext';\nimport { useLeague } from '../hooks/useLeague';\nimport { Widget } from '../components/ui/Widget';\nimport ErrorDisplay from '../components/core/ErrorDisplay';\nimport { FileTextIcon } from '../components/icons/FileTextIcon';\nimport { generateLeagueConstitution } from '../services/geminiService';\nimport LoadingSpinner from '../components/ui/LoadingSpinner';\nimport ReactMarkdown from 'react-markdown';\nimport useCopyToClipboard from '../hooks/useCopyToClipboard';\nimport { ClipboardIcon } from '../components/icons/ClipboardIcon';\nimport { CheckIcon } from '../components/icons/CheckIcon';\n\nconst LeagueConstitutionView: React.FC = () => {\n    const { state, dispatch } = useAppState();\n    const { league } = useLeague();\n    const [constitution, setConstitution] = React.useState<string | null>(null);\n    const [isLoading, setIsLoading] = React.useState(false);\n    const [error, setError] = React.useState<string | null>(null);\n    const [isCopied, setIsCopied] = React.useState(false);\n    const { copy } = useCopyToClipboard();\n\n    if (!league || state.user.id !== league.commissionerId) {\n        return <ErrorDisplay title=\"Access Denied\" message=\"You are not the commissioner of this league.\" onRetry={() => dispatch({ type: 'SET_VIEW', payload: 'DASHBOARD' })} />;\n    }\n\n    const handleGenerate = async () => {\n        setIsLoading(true);\n        setError(null);\n        try {\n            const result = await generateLeagueConstitution(league);\n            if (result) {\n                setConstitution(result);\n            } else {\n                setError(\"The Oracle could not generate a constitution. Please try again.\");\n            }\n        } catch (e) {\n            setError(\"An error occurred while consulting the Oracle.\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n    \n    const handleCopy = () => {\n        if (!constitution) return;\n        copy(constitution);\n        setIsCopied(true);\n        setTimeout(() => setIsCopied(false), 2000);\n    };\n\n    return (\n        <div className=\"w-full h-full flex flex-col p-4 sm:p-6 lg:p-8 overflow-y-auto\">\n            <header className=\"flex-shrink-0 flex justify-between items-center mb-6\">\n                <div>\n                    <h1 className=\"font-display text-3xl sm:text-4xl font-extrabold tracking-wider uppercase text-[var(--text-primary)]\">\n                        League Constitution\n                    </h1>\n                    <p className=\"text-sm text-[var(--text-secondary)] tracking-widest\">{league.name}</p>\n                </div>\n                <button onClick={() => dispatch({ type: 'SET_VIEW', payload: 'COMMISSIONER_TOOLS' })} className=\"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20\">\n                    Back to Tools\n                </button>\n            </header>\n            <main className=\"flex-grow max-w-4xl mx-auto w-full\">\n                <Widget title=\"League Constitution & Bylaws\" icon={<FileTextIcon />}>\n                    <div className=\"p-4\">\n                        {isLoading ? <LoadingSpinner text=\"The Oracle is drafting your constitution...\" /> :\n                         error ? <ErrorDisplay message={error} onRetry={handleGenerate} /> :\n                         constitution ? (\n                            <div>\n                                <div className=\"flex justify-end mb-2\">\n                                    <button onClick={handleCopy} className=\"flex items-center gap-1.5 px-3 py-1 text-xs font-bold bg-white/10 rounded-md hover:bg-white/20\">\n                                        {isCopied ? <CheckIcon /> : <ClipboardIcon />}\n                                        {isCopied ? 'Copied!' : 'Copy to Clipboard'}\n                                    </button>\n                                </div>\n                                <div className=\"prose prose-sm prose-invert bg-black/20 p-4 rounded-lg max-h-[60vh] overflow-y-auto\">\n                                    <ReactMarkdown>{constitution}</ReactMarkdown>\n                                </div>\n                            </div>\n                         ) : (\n                            <div className=\"text-center py-8\">\n                                <p className=\"text-gray-400 mb-4\">Generate a formal constitution for your league based on its current settings.</p>\n                                <button onClick={handleGenerate} className=\"px-6 py-2 bg-cyan-500 text-black font-bold text-sm rounded-md\">\n                                    Generate Constitution\n                                </button>\n                            </div>\n                         )\n                        }\n                    </div>\n                </Widget>\n            </main>\n        </div>\n    );\n};\n\nexport default LeagueConstitutionView;\n"],"names":["LeagueConstitutionView","state","dispatch","useAppState","league","useLeague","constitution","setConstitution","React","isLoading","setIsLoading","error","setError","isCopied","setIsCopied","copy","useCopyToClipboard","jsxDEV","ErrorDisplay","this","handleGenerate","result","generateLeagueConstitution","handleCopy","Widget","FileTextIcon","LoadingSpinner","CheckIcon","ClipboardIcon","ReactMarkdown"],"mappings":"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"}