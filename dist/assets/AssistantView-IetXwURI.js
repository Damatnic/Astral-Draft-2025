import{u as y,R as r,j as e,S}from"./index-COBmtdYu.js";import{z as C}from"./geminiService-1862MQGr.js";import{G as R}from"./GroundingCitations-Cxek-Voq.js";import{M as j}from"./index-CwQkY9CC.js";const U=()=>{const{state:w,dispatch:h}=y(),[o,l]=r.useState([{id:1,sender:"ai",text:"Hello! I'm Astral, your personal fantasy football assistant. How can I help you win today?"}]),[f,b]=r.useState(""),[d,v]=r.useState(!1),p=r.useRef(null),A=()=>{p.current?.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{setTimeout(A,100)},[o]);const c=async s=>{const x=s||f;if(x.trim()===""||d)return;const D={id:Date.now(),sender:"user",text:x},u={id:Date.now()+1,sender:"ai",text:"",isLoading:!0,groundingChunks:[]};l(n=>[...n,D,u]),b(""),v(!0);try{const n=await C(x,w.leagues.filter(a=>!a.isMock),w.user);let m="",t=[];for await(const a of n){m+=a.text;const i=a.candidates?.[0]?.groundingMetadata?.groundingChunks;i&&t.push(...i),l(V=>V.map(N=>N.id===u.id?{...N,text:m}:N))}const E=Array.from(new Map(t.filter(a=>a.web&&a.web.uri).map(a=>[a.web.uri,a])).values());l(a=>a.map(i=>i.id===u.id?{...i,isLoading:!1,groundingChunks:E}:i))}catch(n){console.error("Error calling Gemini API:",n),l(m=>m.map(t=>t.id===u.id?{...t,text:"My apologies, I'm having trouble connecting to the cosmos. Please try again shortly.",isLoading:!1}:t))}finally{v(!1)}},g=["Analyze my team in 'My Awesome League'.","Who are some good waiver wire targets this week?","Help me with a trade idea.","What's the latest news on Christian McCaffrey?"];return e.jsxDEV("div",{className:"w-full h-full flex flex-col p-4 sm:p-6 lg:p-8 overflow-hidden",children:[e.jsxDEV("header",{className:"flex-shrink-0 flex justify-between items-center mb-6",children:[e.jsxDEV("div",{children:e.jsxDEV("h1",{className:"font-display text-3xl sm:text-4xl font-extrabold tracking-wider uppercase flex items-center gap-3",children:[e.jsxDEV(S,{},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:93,columnNumber:25},void 0),e.jsxDEV("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-400 to-pink-500",children:"ASTRAL ASSISTANT"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:94,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:92,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:91,columnNumber:17},void 0),e.jsxDEV("button",{onClick:()=>h({type:"SET_VIEW",payload:"DASHBOARD"}),className:"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20",children:"Back to Dashboard"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:99,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:90,columnNumber:13},void 0),e.jsxDEV("main",{className:"flex-grow flex flex-col items-center glass-pane rounded-2xl overflow-hidden",children:[e.jsxDEV("div",{className:"flex-grow w-full max-w-4xl p-4 space-y-4 overflow-y-auto",children:[o.map(s=>e.jsxDEV("div",{className:`flex gap-3 sm:gap-4 ${s.sender==="user"?"justify-end":"justify-start"}`,children:[s.sender==="ai"&&e.jsxDEV("span",{className:"text-xl sm:text-2xl mt-1 self-start flex-shrink-0",children:"âœ¨"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:107,columnNumber:53},void 0),e.jsxDEV("div",{className:`max-w-[85%] p-3 rounded-lg text-sm sm:text-base leading-relaxed ${s.sender==="user"?"bg-cyan-600":"bg-black/20"}`,children:s.isLoading?e.jsxDEV("div",{className:"flex items-center gap-1.5 p-1",children:[e.jsxDEV("span",{style:{animationDelay:"0ms"},className:"animate-pulse bg-white/50 rounded-full h-1.5 w-1.5"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:111,columnNumber:41},void 0),e.jsxDEV("span",{style:{animationDelay:"150ms"},className:"animate-pulse bg-white/50 rounded-full h-1.5 w-1.5"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:112,columnNumber:41},void 0),e.jsxDEV("span",{style:{animationDelay:"300ms"},className:"animate-pulse bg-white/50 rounded-full h-1.5 w-1.5"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:113,columnNumber:41},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:110,columnNumber:37},void 0):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"prose prose-sm prose-invert prose-p:my-0 prose-headings:my-2",children:e.jsxDEV(j,{children:s.text},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:118,columnNumber:45},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:117,columnNumber:41},void 0),s.groundingChunks&&s.groundingChunks.length>0&&e.jsxDEV(R,{chunks:s.groundingChunks},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:121,columnNumber:45},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:116,columnNumber:37},void 0)},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:108,columnNumber:29},void 0)]},s.id,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:106,columnNumber:25},void 0)),e.jsxDEV("div",{ref:p},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:128,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:104,columnNumber:17},void 0),e.jsxDEV("div",{className:"w-full max-w-4xl p-4 flex-shrink-0",children:[e.jsxDEV("div",{className:"flex flex-wrap gap-2 mb-2 justify-center",children:o.length<=1&&g.map(s=>e.jsxDEV("button",{onClick:()=>c(s),className:"px-3 py-1 bg-white/10 text-xs rounded-full hover:bg-white/20",children:s},s,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:133,columnNumber:29},void 0))},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:131,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("input",{type:"text",placeholder:d?"Astral is thinking...":"Ask anything...",value:f,onChange:s=>b(s.target.value),onKeyDown:s=>s.key==="Enter"&&c(),disabled:d,className:"flex-grow bg-black/10 dark:bg-gray-900/50 border border-[var(--panel-border)] rounded-lg px-4 py-3 text-sm placeholder:text-[var(--text-secondary)] focus:outline-none focus:ring-1 focus:ring-cyan-400 disabled:opacity-50"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:143,columnNumber:25},void 0),e.jsxDEV("button",{onClick:()=>c(),disabled:d||!f,className:"px-6 py-3 bg-cyan-500 text-black font-bold text-sm rounded-lg hover:bg-cyan-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"},void 0,!1,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:152,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:142,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:130,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:103,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/damat/_REPOS/Astral Draft/views/AssistantView.tsx",lineNumber:89,columnNumber:9},void 0)};export{U as default};
